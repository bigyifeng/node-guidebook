<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DNS | Node-Guidebook</title>
    <meta name="description" content="">
    <link rel="icon" href="favicon.ico">
    
    <link rel="preload" href="/node-guidebook/assets/css/0.styles.04b4ede2.css" as="style"><link rel="preload" href="/node-guidebook/assets/js/app.b56de1e6.js" as="script"><link rel="preload" href="/node-guidebook/assets/js/2.9a9b2fe1.js" as="script"><link rel="preload" href="/node-guidebook/assets/js/46.8c5dee73.js" as="script"><link rel="prefetch" href="/node-guidebook/assets/js/10.f31a5cd7.js"><link rel="prefetch" href="/node-guidebook/assets/js/11.9a11099b.js"><link rel="prefetch" href="/node-guidebook/assets/js/12.d192428c.js"><link rel="prefetch" href="/node-guidebook/assets/js/13.3b64565c.js"><link rel="prefetch" href="/node-guidebook/assets/js/14.d5a9b897.js"><link rel="prefetch" href="/node-guidebook/assets/js/15.01e27e34.js"><link rel="prefetch" href="/node-guidebook/assets/js/16.606d1944.js"><link rel="prefetch" href="/node-guidebook/assets/js/17.51b30e3b.js"><link rel="prefetch" href="/node-guidebook/assets/js/18.063b4f41.js"><link rel="prefetch" href="/node-guidebook/assets/js/19.7f27a998.js"><link rel="prefetch" href="/node-guidebook/assets/js/20.c97daf38.js"><link rel="prefetch" href="/node-guidebook/assets/js/21.2e1c632f.js"><link rel="prefetch" href="/node-guidebook/assets/js/22.fbd33fb6.js"><link rel="prefetch" href="/node-guidebook/assets/js/23.b087a4cc.js"><link rel="prefetch" href="/node-guidebook/assets/js/24.9bf9975f.js"><link rel="prefetch" href="/node-guidebook/assets/js/25.833c04e5.js"><link rel="prefetch" href="/node-guidebook/assets/js/26.fa5f5e57.js"><link rel="prefetch" href="/node-guidebook/assets/js/27.e048e63c.js"><link rel="prefetch" href="/node-guidebook/assets/js/28.7389fa33.js"><link rel="prefetch" href="/node-guidebook/assets/js/29.5f7ae828.js"><link rel="prefetch" href="/node-guidebook/assets/js/3.028038f2.js"><link rel="prefetch" href="/node-guidebook/assets/js/30.97c6204d.js"><link rel="prefetch" href="/node-guidebook/assets/js/31.0f2c316e.js"><link rel="prefetch" href="/node-guidebook/assets/js/32.a2d860ff.js"><link rel="prefetch" href="/node-guidebook/assets/js/33.ef37b95b.js"><link rel="prefetch" href="/node-guidebook/assets/js/34.55cdaada.js"><link rel="prefetch" href="/node-guidebook/assets/js/35.7f7e104c.js"><link rel="prefetch" href="/node-guidebook/assets/js/36.89d29ca3.js"><link rel="prefetch" href="/node-guidebook/assets/js/37.13112c94.js"><link rel="prefetch" href="/node-guidebook/assets/js/38.57cfe6d1.js"><link rel="prefetch" href="/node-guidebook/assets/js/39.db4440a8.js"><link rel="prefetch" href="/node-guidebook/assets/js/4.675c3702.js"><link rel="prefetch" href="/node-guidebook/assets/js/40.95563075.js"><link rel="prefetch" href="/node-guidebook/assets/js/41.c737d452.js"><link rel="prefetch" href="/node-guidebook/assets/js/42.77397b50.js"><link rel="prefetch" href="/node-guidebook/assets/js/43.55d50864.js"><link rel="prefetch" href="/node-guidebook/assets/js/44.2ee11d4d.js"><link rel="prefetch" href="/node-guidebook/assets/js/45.cbfb9e4f.js"><link rel="prefetch" href="/node-guidebook/assets/js/47.ed9a119b.js"><link rel="prefetch" href="/node-guidebook/assets/js/48.ace38419.js"><link rel="prefetch" href="/node-guidebook/assets/js/49.e79545ac.js"><link rel="prefetch" href="/node-guidebook/assets/js/5.11ee68c1.js"><link rel="prefetch" href="/node-guidebook/assets/js/50.9fbe2e33.js"><link rel="prefetch" href="/node-guidebook/assets/js/51.4896a061.js"><link rel="prefetch" href="/node-guidebook/assets/js/52.c4ceb1c2.js"><link rel="prefetch" href="/node-guidebook/assets/js/53.8c0fea71.js"><link rel="prefetch" href="/node-guidebook/assets/js/54.c05dccf1.js"><link rel="prefetch" href="/node-guidebook/assets/js/55.b2d65211.js"><link rel="prefetch" href="/node-guidebook/assets/js/56.a43684ff.js"><link rel="prefetch" href="/node-guidebook/assets/js/57.7ba8a6f3.js"><link rel="prefetch" href="/node-guidebook/assets/js/58.f0c2c1ef.js"><link rel="prefetch" href="/node-guidebook/assets/js/59.944bad13.js"><link rel="prefetch" href="/node-guidebook/assets/js/6.21a4b1c5.js"><link rel="prefetch" href="/node-guidebook/assets/js/60.e62081dc.js"><link rel="prefetch" href="/node-guidebook/assets/js/61.5e74305b.js"><link rel="prefetch" href="/node-guidebook/assets/js/62.ca1dac6e.js"><link rel="prefetch" href="/node-guidebook/assets/js/63.c03d966c.js"><link rel="prefetch" href="/node-guidebook/assets/js/64.c7411f74.js"><link rel="prefetch" href="/node-guidebook/assets/js/65.23e9fb75.js"><link rel="prefetch" href="/node-guidebook/assets/js/66.4dbed100.js"><link rel="prefetch" href="/node-guidebook/assets/js/67.80de04b2.js"><link rel="prefetch" href="/node-guidebook/assets/js/68.73588625.js"><link rel="prefetch" href="/node-guidebook/assets/js/69.d28f892e.js"><link rel="prefetch" href="/node-guidebook/assets/js/7.62412490.js"><link rel="prefetch" href="/node-guidebook/assets/js/70.a271a34d.js"><link rel="prefetch" href="/node-guidebook/assets/js/71.407abc57.js"><link rel="prefetch" href="/node-guidebook/assets/js/72.67ca9438.js"><link rel="prefetch" href="/node-guidebook/assets/js/73.c95f2cd6.js"><link rel="prefetch" href="/node-guidebook/assets/js/74.95ef83e7.js"><link rel="prefetch" href="/node-guidebook/assets/js/75.a225a743.js"><link rel="prefetch" href="/node-guidebook/assets/js/76.45437d36.js"><link rel="prefetch" href="/node-guidebook/assets/js/77.919cd113.js"><link rel="prefetch" href="/node-guidebook/assets/js/78.447a327e.js"><link rel="prefetch" href="/node-guidebook/assets/js/79.74917783.js"><link rel="prefetch" href="/node-guidebook/assets/js/8.26079951.js"><link rel="prefetch" href="/node-guidebook/assets/js/80.7517c60e.js"><link rel="prefetch" href="/node-guidebook/assets/js/81.4896eb33.js"><link rel="prefetch" href="/node-guidebook/assets/js/82.52db751e.js"><link rel="prefetch" href="/node-guidebook/assets/js/83.108e2ceb.js"><link rel="prefetch" href="/node-guidebook/assets/js/84.c4018c3e.js"><link rel="prefetch" href="/node-guidebook/assets/js/85.95ab55fa.js"><link rel="prefetch" href="/node-guidebook/assets/js/86.01a6e820.js"><link rel="prefetch" href="/node-guidebook/assets/js/87.7748e683.js"><link rel="prefetch" href="/node-guidebook/assets/js/88.730b440e.js"><link rel="prefetch" href="/node-guidebook/assets/js/89.4eca5ebb.js"><link rel="prefetch" href="/node-guidebook/assets/js/9.841d82b7.js"><link rel="prefetch" href="/node-guidebook/assets/js/90.6dc66fef.js"><link rel="prefetch" href="/node-guidebook/assets/js/91.616655e3.js"><link rel="prefetch" href="/node-guidebook/assets/js/92.0e127a47.js"><link rel="prefetch" href="/node-guidebook/assets/js/93.cc651dc5.js"><link rel="prefetch" href="/node-guidebook/assets/js/94.0c069be2.js"><link rel="prefetch" href="/node-guidebook/assets/js/95.28ec5306.js"><link rel="prefetch" href="/node-guidebook/assets/js/96.4680804b.js"><link rel="prefetch" href="/node-guidebook/assets/js/97.04e2deb8.js">
    <link rel="stylesheet" href="/node-guidebook/assets/css/0.styles.04b4ede2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/node-guidebook/" class="home-link router-link-active"><img src="/node-guidebook/favicon.png" alt="Node-Guidebook" class="logo"> <span class="site-name can-hide">Node-Guidebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/tsejx/Node-Guidebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/tsejx/Node-Guidebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>模块</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-guidebook/module/commonjs.html" class="sidebar-link">CommonJS</a></li><li><a href="/node-guidebook/module/module.html" class="sidebar-link">模块机制</a></li><li><a href="/node-guidebook/module/global.html" class="sidebar-link">全局对象</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>I/O</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-guidebook/io/io.html" class="sidebar-link">I/O</a></li><li><a href="/node-guidebook/io/stream/stream.html" class="sidebar-link">流</a></li><li><a href="/node-guidebook/io/stream/readable.html" class="sidebar-link">可读流</a></li><li><a href="/node-guidebook/io/stream/writable.html" class="sidebar-link">可写流</a></li><li><a href="/node-guidebook/io/buffer.html" class="sidebar-link">缓冲器</a></li><li><a href="/node-guidebook/io/filesystem.html" class="sidebar-link">文件系统</a></li><li><a href="/node-guidebook/io/path.html" class="sidebar-link">路径</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-guidebook/process/process.html" class="sidebar-link">进程</a></li><li><a href="/node-guidebook/process/child-process.html" class="sidebar-link">子进程</a></li><li><a href="/node-guidebook/process/cluster.html" class="sidebar-link">集群</a></li><li><a href="/node-guidebook/process/ipc.html" class="sidebar-link">进程间通信</a></li><li><a href="/node-guidebook/process/daemon.html" class="sidebar-link">守护进程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-guidebook/network/socket.html" class="sidebar-link">Socket</a></li><li><a href="/node-guidebook/network/dns.html" class="active sidebar-link">DNS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-guidebook/network/dns.html#基本概况" class="sidebar-link">基本概况</a></li><li class="sidebar-sub-header"><a href="/node-guidebook/network/dns.html#模块方法" class="sidebar-link">模块方法</a></li><li class="sidebar-sub-header"><a href="/node-guidebook/network/dns.html#记录类型" class="sidebar-link">记录类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-guidebook/network/dns.html#cname" class="sidebar-link">CNAME</a></li><li class="sidebar-sub-header"><a href="/node-guidebook/network/dns.html#ptr" class="sidebar-link">PTR</a></li></ul></li><li class="sidebar-sub-header"><a href="/node-guidebook/network/dns.html#错误码" class="sidebar-link">错误码</a></li></ul></li><li><a href="/node-guidebook/network/net.html" class="sidebar-link">Net</a></li><li><a href="/node-guidebook/network/dgram.html" class="sidebar-link">Dgram</a></li><li><a href="/node-guidebook/network/http.html" class="sidebar-link">HTTP</a></li><li><a href="/node-guidebook/network/http-server.html" class="sidebar-link">HTTP Server</a></li><li><a href="/node-guidebook/network/http-client-request.html" class="sidebar-link">HTTP ClientRequest</a></li><li><a href="/node-guidebook/network/http-incoming-message.html" class="sidebar-link">HTTP IncomingMessage</a></li><li><a href="/node-guidebook/network/http-server-response.html" class="sidebar-link">HTTP ServerResponse</a></li><li><a href="/node-guidebook/network/https.html" class="sidebar-link">HTTPS</a></li><li><a href="/node-guidebook/network/http2.html" class="sidebar-link">HTTP2</a></li><li><a href="/node-guidebook/network/url.html" class="sidebar-link">URL</a></li><li><a href="/node-guidebook/network/querystring.html" class="sidebar-link">QueryString</a></li><li><a href="/node-guidebook/network/crypto.html" class="sidebar-link">Crypto</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>指令</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-guidebook/3m/npm.html" class="sidebar-link">NPM</a></li><li><a href="/node-guidebook/3m/npx.html" class="sidebar-link">NPX</a></li><li><a href="/node-guidebook/3m/nrm.html" class="sidebar-link">NRM</a></li><li><a href="/node-guidebook/3m/nvm.html" class="sidebar-link">NVM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>推荐资料</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-guidebook/recommend.html" class="sidebar-link">推荐资料</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dns"><a href="#dns" class="header-anchor">#</a> DNS</h1> <p><a href="https://tsejx.github.io/JavaScript-Guidebook/computer-networks/dns.html" target="_blank" rel="noopener noreferrer">关于 DNS 域名解析系统<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>dns 模块用于解析域名。</p> <h2 id="基本概况"><a href="#基本概况" class="header-anchor">#</a> 基本概况</h2> <p>dns 模块包含两大类函数：</p> <ul><li>第一类函数，使用底层操作系统工具进行域名解析，且无需进行网络通信。 这类函数只有一个：<code>dns.lookup()</code></li> <li>第二类函数，连接到真实的 DNS 服务器进行域名解析，且始终使用网络进行 DNS 查询。 这类函数包含了 dns 模块中除 <code>dns.lookup()</code> 以外的所有函数。 这些函数使用与 <code>dns.lookup()</code> 不同的配置文件（例如 <code>/etc/hosts</code>）</li></ul> <table><thead><tr><th>方法</th> <th>功能</th> <th>同步</th> <th>网络请求</th> <th>速度</th></tr></thead> <tbody><tr><td>lookup</td> <td>通过系统自带的 DNS 缓存（如 <code>/etc/hosts</code>）</td> <td>同步</td> <td>无</td> <td>快</td></tr> <tr><td>resolve</td> <td>通过系统配置的 DNS 服务器指定的记录（rrtype 指定）</td> <td>异步</td> <td>有</td> <td>慢</td></tr></tbody></table> <p><strong>dns 模块中 <code>.loopup</code> 与 <code>.resolve</code> 的区别：</strong></p> <p>当你要解析一个域名的 IP 时，通过 <code>.lookup</code> 查询直接调用 <code>getaddrinfo</code> 来拿去地址，速度很快，但是如果本地的 <code>hosts</code> 文件被修改了，<code>.lookup</code> 就会拿 <code>hosts</code> 文件中的地址，而 <code>.resolve</code> 依旧是外部正常的地址。</p> <p>由于 <code>.lookup</code> 是同步的，所以如果由于什么不可控的原因导致 <code>getaddrinfo</code> 缓慢或者阻塞是会影响整个 Node 进程的。</p> <h2 id="模块方法"><a href="#模块方法" class="header-anchor">#</a> 模块方法</h2> <ul><li><code>dns.lookup(hostname [,options], callback)</code>：将域名解析为第一条找到的记录</li> <li><code>dns.resolve(hostname [, rrtype], callback)</code>：将一个域名解析为一个 rrtype 指定记录类型的数组</li> <li><code>dns.reverse(ip, callback)</code>：反向解析 IP 地址，指向该 IP 地址的域名数组</li> <li><code>dns.getServer()</code>：返回一个用于当前解析的 IP 地址数组的字符串</li> <li><code>dns.setServer(servers)</code>：指定一组 IP 地址作为解析服务器</li></ul> <p>🌰 <strong>示例：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dns <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dns'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

dns<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token string">'www.google.com'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> address</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="记录类型"><a href="#记录类型" class="header-anchor">#</a> 记录类型</h2> <p>域名与 IP 之间的对应关系，称为记录（record）。根据使用场景，记录可以分成不同的类型（type）。</p> <p>常见的 DNS 记录类型：</p> <ul><li><strong>A</strong>：地址记录（Address），将域名指向一个 IPV4 的地址</li> <li><strong>AAAA</strong>：将域名指向一个 IPV6 的地址</li> <li><strong>NS</strong>：域名服务器记录（Name Server），将子域名指定其他 DNS 服务器解析。该记录只能设置为域名，不能设置为 IP 地址。</li> <li><strong>MX</strong>：邮件记录（Mail eXchange），将域名指向邮件服务器地址。</li> <li><strong>CNAME</strong>：规范名称记录（Canonical Name），将域名指向另一个域名，即当前查询的域名是另一个域名的跳转，详见下文。</li> <li><strong>PTR</strong>：逆向查询记录（Pointer Record），只用于从 IP 地址查询域名</li> <li><strong>TXT</strong>：文本长度限制 512，通常做 SPF 记录（反垃圾邮件）</li> <li><strong>CAA</strong>：CA 证书颁发机构授权校验（Certification Authority Authorization）</li> <li><strong>SRV</strong>：服务记录（Service Record），记录提供特定的服务的服务器</li> <li><strong>显性URL</strong>：将域名 302 重定向到另一个地址</li></ul> <p>一般来说，为了服务的安全可靠，至少应该有两条 NS 记录，而 A 记录和 MX 记录也可以有多条，这样就提供了服务的冗余性，防止出现单点失败。</p> <h3 id="cname"><a href="#cname" class="header-anchor">#</a> CNAME</h3> <p><strong>CNAME</strong> 记录主要用于域名的内部跳转，为服务器配置提供灵活性，用户感知不到。举例来说，<code>www.baidu.com</code> 这个域名就是一个 CNAME 记录。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">dig</span> www.baidu.com

<span class="token punctuation">;</span><span class="token punctuation">;</span>ANSWER SECTION:
www.baidu.com     <span class="token number">1091</span>  IN   CNAME   www.a.shifen.com
www.a.shifen.com  <span class="token number">200</span>   IN     A     <span class="token number">14.215</span>.177.39
www.a.shifen.com  <span class="token number">200</span>   IN     A     <span class="token number">14.215</span>.177.38
</code></pre></div><p>上面结果显示，<code>www.baidu.com</code> 的 CNAME 记录指向 <code>www.a.shifen.com</code>。也就说，用户查询 <code>www.baidu.com</code> 的时候，实际上返回的是 <code>www.a.shifen.com</code> 的 IP 地址。</p> <p>这样的好处是，变更服务器 IP 地址的时候，只要修改 <code>www.a.shifen.com</code> 这个域名就可以了，用户的 <code>www.baidu.com</code> 域名不用修改。</p> <p>由于 CNAME 记录就是一个替换，所以域名一旦设置 CNAME 记录以后，就不能再设置其他记录了（比如 A 记录和 MX 记录），这是为了防止产生冲突。举例来说，<code>foo.com</code> 指向 <code>bar.com</code>，而两个域名各有自己的 MX 记录，如果两者不一致，就会产生问题。由于顶级域名通常要设置 MX 记录，所以一般不允许用户对顶级域名设置 CNAME 记录。</p> <h3 id="ptr"><a href="#ptr" class="header-anchor">#</a> PTR</h3> <p>PTR 记录用于从 IP 地址反查域名。</p> <p>逆向查询的一个应用，是可以防止垃圾邮件，即验证发送邮件的 IP 地址，是否真的有它所声称的域名。</p> <h2 id="错误码"><a href="#错误码" class="header-anchor">#</a> 错误码</h2> <table><thead><tr><th>错误码</th> <th>语义</th></tr></thead> <tbody><tr><td>dns.NODATA</td> <td>DNS 服务返回没有数据</td></tr> <tr><td>dns.FORMERR</td> <td>DNS 服务器查询没有格式化</td></tr> <tr><td>dns.SERVFAIL</td> <td>DNS 服务器返回失败</td></tr> <tr><td>dns.NOTFOUND</td> <td>域名未找到</td></tr> <tr><td>dns.NOIMP</td> <td>DNS 服务器不执行请求的操作</td></tr> <tr><td>dns.REFUSED</td> <td>查询 DNS 服务器拒绝</td></tr> <tr><td>dns.BADQUERY</td> <td>未格式化 DNS 查询</td></tr> <tr><td>dns.BADNAME</td> <td>未格式化主机</td></tr> <tr><td>dns.BADFAMILY</td> <td>没有提供地址族</td></tr> <tr><td>dns.BADRESP</td> <td>未格式化 DNS 回复</td></tr> <tr><td>dns.CONNREFUSED</td> <td>无法连接 DNS 服务器</td></tr> <tr><td>dns.TIMEOUT</td> <td>连接 DNS 服务器超时</td></tr> <tr><td>dns.EOF</td> <td>文件末尾</td></tr> <tr><td>dns.FILE</td> <td>读取文件错误</td></tr> <tr><td>dns.NOMEM</td> <td>内存溢出</td></tr> <tr><td>dns.DESTRUCTION</td> <td>通道以及销毁</td></tr> <tr><td>dns.BADSTR</td> <td>未格式化字符串</td></tr> <tr><td>dns.BADFLAGS</td> <td>指定非法标记</td></tr> <tr><td>dns.NONAME</td> <td>给定主机名不是数字</td></tr> <tr><td>dns.BADHINTS</td> <td>指定非法的提示标志</td></tr> <tr><td>dns.NOTINITIALIED</td> <td>异步 DNS 请求库初始化未完成</td></tr> <tr><td>dns.LOADIPHLPAPI</td> <td>加载 iphlpapi.dll 错误</td></tr> <tr><td>dns.ADDRGETNETWORKPARAMS</td> <td>找不到读取本机 DNS 信息函数</td></tr> <tr><td>dns.CANCELLED</td> <td>DNS 查询取消</td></tr></tbody></table> <hr> <p><strong>参考资料：</strong></p> <ul><li><a href="http://nodejs.cn/api/dns.html" target="_blank" rel="noopener noreferrer">📖 NodeJS API Documentation：DNS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5a4a2f00f265da431e171da4" target="_blank" rel="noopener noreferrer">📝 从 Chrome 源码看 DNS 解析过程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">1/16/2020, 11:55:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/node-guidebook/network/socket.html" class="prev">Socket</a></span> <span class="next"><a href="/node-guidebook/network/net.html">Net</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/node-guidebook/assets/js/app.b56de1e6.js" defer></script><script src="/node-guidebook/assets/js/2.9a9b2fe1.js" defer></script><script src="/node-guidebook/assets/js/46.8c5dee73.js" defer></script>
  </body>
</html>
