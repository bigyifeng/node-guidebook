(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"8rq0":function(e,n,a){"use strict";a.r(n);var t=a("q1tI"),l=a.n(t),r=(a("B2uJ"),a("+su7"),a("qOys")),c=a.n(r);a("5Yjd");n["default"]=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"\u5e38\u7528\u65b9\u6cd5"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5e38\u7528\u65b9\u6cd5"},l.a.createElement("span",{className:"icon icon-link"})),"\u5e38\u7528\u65b9\u6cd5"),l.a.createElement("h2",{id:"\u6587\u6863\u67e5\u8be2"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6587\u6863\u67e5\u8be2"},l.a.createElement("span",{className:"icon icon-link"})),"\u6587\u6863\u67e5\u8be2"),l.a.createElement("h3",{id:"\u67e5\u8be2\u6240\u6709\u6570\u636e\u9879-find"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u67e5\u8be2\u6240\u6709\u6570\u636e\u9879-find"},l.a.createElement("span",{className:"icon icon-link"})),"\u67e5\u8be2\u6240\u6709\u6570\u636e\u9879 find"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8bed\u6cd5\uff1a")),l.a.createElement(c.a,{code:"Model.find(conditions, [projection], [options], [callback])\n",lang:"js"}),l.a.createElement("p",null,"\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u67e5\u8be2\u6761\u4ef6\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7528\u4e8e\u63a7\u5236\u8fd4\u56de\u7684\u5b57\u6bb5\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u7528\u4e8e\u914d\u7f6e\u67e5\u8be2\u53c2\u6570\uff0c\u7b2c\u56db\u4e2a\u53c2\u6570\u662f\u56de\u8c03\u51fd\u6570\u3002"),l.a.createElement(c.a,{code:"const schema = new mongoose.Schema({ age: Number, name: String })\n\nconst model = mongoose.model('model', schema);\n\nmodel.find(function(err, docs) {\n    console.log(docs);\n    // [{ _id: xxx, name: 'xie', age: 18 },\n    //  { _id: xxx, name: 'jun', age: 20 },\n    //  { _id: xxx, name: 'xing', age: 22 },\n    //  { _id: xxx, name: 'star', age: 24 } ]\n})\n",lang:"js"}),l.a.createElement("p",null,"\u627e\u51fa\u5e74\u9f84\u5927\u4e8e 20 \u7684\u6570\u636e\uff1a"),l.a.createElement(c.a,{code:"model.find({ age: { $gte: 20 }}, function(err, docs) {\n    console.log(docs);\n    // [ { _id: xxx, name: 'jun', age: 20 },\n    //  { _id: xxx, name: 'xing', age: 22 },\n    //  { _id: xxx, name: 'star', age: 24 } ]\n})\n",lang:"js"}),l.a.createElement("p",null,"\u627e\u51fa\u5e74\u9f84\u5927\u4e8e 20 \u4e14\u540d\u5b57\u4e2d\u5305\u542b ",l.a.createElement("code",null,"xing")," \u7684\u6570\u636e\uff1a"),l.a.createElement(c.a,{code:"model.find({ name: /xing/, age: { $gte: 20 }}, function(err, docs) {\n    console.log(docs);\n    // [ { _id: xxx, name: 'xing', age: 22 } ]\n})\n",lang:"js"}),l.a.createElement("p",null,"\u627e\u51fa\u540d\u5b57\u4e2d\u5b58\u5728 ",l.a.createElement("code",null,"x")," \u7684\u6570\u636e\uff0c\u4e14\u53ea\u8f93\u51fa ",l.a.createElement("code",null,"name")," \u5b57\u6bb5\u3002"),l.a.createElement(c.a,{code:"model.find({ name: /x/ }, 'name', function(err, docs) {\n    console.log(docs);\n    // [{ name: 'xie' }, { name: 'xing' }]\n})\n",lang:"js"}),l.a.createElement("p",null,"\u5982\u679c\u786e\u5b9e\u4e0d\u9700\u8981 ",l.a.createElement("code",null,"_id")," \u5b57\u6bb5\u8f93\u51fa\uff0c\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff1a"),l.a.createElement(c.a,{code:"model.find({ name: /x/ }, { name: 1, _id: 0 }, function(err, docs){\n    console.log(docs);\n    // [{ name: 'xie' }, { name: 'xing' }]\n})\n",lang:"js"}),l.a.createElement("h3",{id:"findbyid"},l.a.createElement("a",{"aria-hidden":"true",href:"#findbyid"},l.a.createElement("span",{className:"icon icon-link"})),"findById"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8bed\u6cd5\uff1a")),l.a.createElement(c.a,{code:"Model.findById(id, [projection], [options], [callback])\n",lang:"js"}),l.a.createElement(c.a,{code:"const id = 'xxx'\n\nmodel.findById(id, { lean: true }).exec(function(err, doc){\n    console.log(doc);\n    // { _id: xxx }\n})\n",lang:"js"}),l.a.createElement("h3",{id:"findone"},l.a.createElement("a",{"aria-hidden":"true",href:"#findone"},l.a.createElement("span",{className:"icon icon-link"})),"findOne"),l.a.createElement("p",null,"\u8be5\u65b9\u6cd5\u8fd4\u56de\u67e5\u627e\u5230\u7684\u6240\u6709\u5b9e\u4f8b\u7684\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\u3002"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8bed\u6cd5\uff1a")),l.a.createElement(c.a,{code:"Model.findOne([conditions], [projection], [options], [callback])\n",lang:"js"}),l.a.createElement("p",null,"\u67e5\u8be2 ",l.a.createElement("code",null,"age > 20")," \u7684\u6587\u6863\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6587\u6863\u3002"),l.a.createElement(c.a,{code:"model.findOne({ age: { $gt: 20 }}, function(err, doc) {\n    console.log(doc);\n    // { _id: xxx, name: 'jun', age: 22 }\n})\n",lang:"js"}),l.a.createElement("p",null,"\u67e5\u8be2 ",l.a.createElement("code",null,"age > 20")," \u7684\u6587\u6863\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6587\u6863\uff0c\u4e14\u53ea\u8f93\u51fa ",l.a.createElement("code",null,"nmae")," \u5b57\u6bb5\u3002"),l.a.createElement(c.a,{code:"model.findOne({ age: { $gt: 20 }}, { name: 1, _id: 0 }, function(err, doc) {\n    console.log(doc);\n    // { name: 'jun' }\n})\n",lang:"js"}),l.a.createElement("p",null,"\u67e5\u8be2 ",l.a.createElement("code",null,"age > 20")," \u7684\u6587\u6863\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6587\u6863\uff0c\u4e14\u8f93\u51fa\u5305\u542b ",l.a.createElement("code",null,"name")," \u5b57\u6bb5\u5728\u5185\u7684\u6700\u77ed\u5b57\u6bb5\u3002"),l.a.createElement(c.a,{code:"model.findOne({ age: { $gt: 20 }}, 'name', { lean: true }, function(err, doc){\n    console.log(doc);\n    // { _id: xxx, name: 'jun' }\n})\n",lang:"js"}),l.a.createElement("p",null,"\u6587\u6863\u67e5\u8be2\u4e2d\uff0c\u5e38\u7528\u7684\u67e5\u8be2\u6761\u4ef6\uff1a"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u67e5\u8be2\u6807\u8bc6"),l.a.createElement("th",null,"\u63cf\u8ff0"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$or")),l.a.createElement("td",null,"\u6216\u5173\u7cfb")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$nor")),l.a.createElement("td",null,"\u6216\u5173\u7cfb\u53d6\u53cd")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$gt")),l.a.createElement("td",null,"\u5927\u4e8e")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$gte")),l.a.createElement("td",null,"\u5927\u4e8e\u7b49\u4e8e")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$lt")),l.a.createElement("td",null,"\u5c0f\u4e8e")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$lte")),l.a.createElement("td",null,"\u5c0f\u4e8e\u7b49\u4e8e")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$ne")),l.a.createElement("td",null,"\u4e0d\u7b49\u4e8e")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$in")),l.a.createElement("td",null,"\u5728\u591a\u4e2a\u503c\u8303\u56f4\u5185")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$nin")),l.a.createElement("td",null,"\u4e0d\u5728\u591a\u4e2a\u503c\u8303\u56f4\u5185")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$all")),l.a.createElement("td",null,"\u5339\u914d\u6570\u7ec4\u4e2d\u591a\u4e2a\u503c")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$regex")),l.a.createElement("td",null,"\u6b63\u5219\uff0c\u7528\u4e8e\u6a21\u7cca\u67e5\u8be2")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$size")),l.a.createElement("td",null,"\u5339\u914d\u6570\u7ec4\u5927\u5c0f")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$maxDistance")),l.a.createElement("td",null,"\u8303\u56f4\u67e5\u8be2\uff0c\u8ddd\u79bb\uff08\u57fa\u4e8eLBS\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$mod")),l.a.createElement("td",null,"\u53d6\u6a21\u8fd0\u7b97")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$near")),l.a.createElement("td",null,"\u9886\u57df\u67e5\u8be2\uff0c\u67e5\u8be2\u9644\u8fd1\u7684\u4f4d\u7f6e\uff08\u57fa\u4e8eLBS\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$exists")),l.a.createElement("td",null,"\u5b57\u6bb5\u662f\u5426\u5b58\u5728")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$elemMatch")),l.a.createElement("td",null,"\u5339\u914d\u5185\u6570\u7ec4\u5185\u7684\u5143\u7d20")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$within")),l.a.createElement("td",null,"\u8303\u56f4\u67e5\u8be2\uff08\u57fa\u4e8eLBS\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$box")),l.a.createElement("td",null,"\u8303\u56f4\u67e5\u8be2\uff0c\u77e9\u5f62\u8303\u56f4\uff08\u57fa\u4e8eLBS\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$center")),l.a.createElement("td",null,"\u8303\u56f4\u67e5\u8be2\uff0c\u5706\u5f62\u8303\u56f4\uff08\u57fa\u4e8eLBS\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$centerSphere")),l.a.createElement("td",null,"\u8303\u56f4\u67e5\u8be2\uff0c\u7403\u5f62\u67e5\u8be2\uff08\u57fa\u4e8eLBS\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("code",null,"$slice")),l.a.createElement("td",null,"\u67e5\u8be2\u5b57\u6bb5\u96c6\u5408\u4e2d\u7684\u5143\u7d20\uff08\u6bd4\u5982\u4ece\u7b2c\u51e0\u4e2a\u4e4b\u540e\uff0c\u7b2cN\u5230\u7b2cM\u4e2a\u5143\u7d20\uff09")))),l.a.createElement("h3",{id:"where"},l.a.createElement("a",{"aria-hidden":"true",href:"#where"},l.a.createElement("span",{className:"icon icon-link"})),"$where"),l.a.createElement("p",null,"\u5982\u679c\u8981\u8fdb\u884c\u66f4\u590d\u6742\u7684\u67e5\u8be2\uff0c\u9700\u8981\u4f7f\u7528 ",l.a.createElement("code",null,"$where")," \u64cd\u4f5c\u7b26\uff0c",l.a.createElement("code",null,"$where")," \u64cd\u4f5c\u7b26\u529f\u80fd\u5f3a\u5927\u800c\u7075\u6d3b\uff0c\u5b83\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u7684 JavaScript \u4f5c\u4e3a\u67e5\u8be2\u7684\u4e00\u90e8\u5206\uff0c\u5305\u542b JavaScript \u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32\u6216 JavaScript \u51fd\u6570\u3002"),l.a.createElement(c.a,{code:'> db.model.find()\n< "_id": ObjecId<001>, "name": \'xie\', "age": 18, "x": 1, "y": 2 >\n< "_id": ObjecId<002>, "name": \'jun\', "age": 20, "x": 1, "y": 1 >\n< "_id": ObjecId<003>, "name": \'xing\', "age": 22, "x": 2, "y": 1 >\n< "_id": ObjecId<004>, "name": \'star\', "age": 24, "x": 2, "y": 2 >\n',lang:"bash"}),l.a.createElement("p",null,l.a.createElement("strong",null,"\u5b57\u7b26\u4e32")),l.a.createElement(c.a,{code:"model.find({ $where: 'this.x === this.y' }, function(err, docs){\n  console.log(docs);\n  // [ { _id: '002', name: 'jun', age: 20, x: 1, y: 1 },\n  //   { _id: '004', name: 'star', age: 24, x: 2, y: 2 } ]\n})\n",lang:"js"}),l.a.createElement("p",null,l.a.createElement("strong",null,"\u51fd\u6570")),l.a.createElement(c.a,{code:"model.find({ $where: function() {\n  return this.x !== this.y\n}}, function(err, docs){\n  console.log(docs);\n  // [ { _id: '002', name: 'jun', age: 20, x: 1, y: 1 },\n  //   { _id: '004', name: 'star', age: 24, x: 2, y: 2 } ]\n})\n",lang:"js"}),l.a.createElement("h2",{id:"\u6587\u6863\u66f4\u65b0"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6587\u6863\u66f4\u65b0"},l.a.createElement("span",{className:"icon icon-link"})),"\u6587\u6863\u66f4\u65b0"),l.a.createElement("p",null,"\u6587\u6863\u66f4\u65b0\u7684\u65b9\u6cd5\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"update()")),l.a.createElement("li",null,l.a.createElement("code",null,"updateMany()")),l.a.createElement("li",null,l.a.createElement("code",null,"find()")," + ",l.a.createElement("code",null,"save()")),l.a.createElement("li",null,l.a.createElement("code",null,"findByIdAndUpdate()")),l.a.createElement("li",null,l.a.createElement("code",null,"findOneAndUpdate()"))),l.a.createElement("h3",{id:"update"},l.a.createElement("a",{"aria-hidden":"true",href:"#update"},l.a.createElement("span",{className:"icon icon-link"})),"update"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8bed\u6cd5\uff1a")),l.a.createElement(c.a,{code:"Model.update(conditions, doc, [options], [callback])\n",lang:"js"}),l.a.createElement("p",null,"\u914d\u7f6e\u9009\u9879\uff1a"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u9009\u9879"),l.a.createElement("th",null,"\u9ed8\u8ba4\u503c"),l.a.createElement("th",null,"\u8bf4\u660e"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"safe"),l.a.createElement("td",null,"true"),l.a.createElement("td",null,"\u5b89\u5168\u6a21\u5f0f")),l.a.createElement("tr",null,l.a.createElement("td",null,"upsert"),l.a.createElement("td",null,"false"),l.a.createElement("td",null,"\u5982\u679c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u65b0\u7eaa\u5f55")),l.a.createElement("tr",null,l.a.createElement("td",null,"multi"),l.a.createElement("td",null,"false"),l.a.createElement("td",null,"\u662f\u5426\u66f4\u65b0\u591a\u4e2a\u67e5\u8be2\u8bb0\u5f55")),l.a.createElement("tr",null,l.a.createElement("td",null,"runValidators"),l.a.createElement("td",null,"false"),l.a.createElement("td",null,"\u6267\u884c Validation \u9a8c\u8bc1")),l.a.createElement("tr",null,l.a.createElement("td",null,"setDefaultsOnInsert"),l.a.createElement("td",null,"true"),l.a.createElement("td",null,"\u5728\u65b0\u5efa\u63d2\u5165\u6587\u6863\u5b9a\u4e49\u7684\u9ed8\u8ba4\u503c")),l.a.createElement("tr",null,l.a.createElement("td",null,"strict"),l.a.createElement("td",null),l.a.createElement("td",null,"\u4ee5 strict \u6a21\u5f0f\u8fdb\u884c\u66f4\u65b0")),l.a.createElement("tr",null,l.a.createElement("td",null,"overwrite"),l.a.createElement("td",null,"false"),l.a.createElement("td",null,"\u7981\u7528 ",l.a.createElement("code",null,"update-only")," \u6a21\u5f0f\uff0c\u5141\u8bb8\u8986\u76d6\u8bb0\u5f55")))),l.a.createElement("p",null,"\ud83c\udf30 ",l.a.createElement("strong",null,"\u793a\u4f8b\uff1a")),l.a.createElement("p",null,"\u901a\u8fc7 ",l.a.createElement("code",null,"update()")," \u67e5\u8be2 ",l.a.createElement("code",null,"age")," \u5927\u4e8e 20 \u7684\u6570\u636e\uff0c\u5e76\u5c06\u5e74\u9f84\u66f4\u6539\u4e3a 40 \u5c81\u3002"),l.a.createElement(c.a,{code:"Model.update({ age: { $gte: 20 }}, { age: 40 }, function(err, raw) {\n  console.log(raw)\n  // { n: 1, nModified: 1, ok: 1 }\n})\n",lang:"js"}),l.a.createElement("p",null,"\u66f4\u6539\u540e\u6570\u636e\u5e93\u4e2d\uff0c\u53ea\u6709\u7b2c\u4e00\u4e2a\u6570\u636e\u66f4\u6539\u4e3a 40 \u5c81\uff0c\u800c\u5176\u5b83\u4e09\u4e2a\u6570\u636e\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff1a"),l.a.createElement(c.a,{code:'> db.model.find()\n< "_id": ObjecId<001>, "name": \'xie\', "age": 18 >\n< "_id": ObjecId<002>, "name": \'jun\', "age": 40>\n< "_id": ObjecId<003>, "name": \'xing\', "age": 22>\n< "_id": ObjecId<004>, "name": \'star\', "age": 24>\n',lang:"bash"}),l.a.createElement("p",null,"\u5982\u679c\u8981\u540c\u65f6\u66f4\u65b0\u591a\u4e2a\u8bb0\u5f55\uff0c\u9700\u8981\u8bbe\u7f6e options \u53c2\u6570\u4e2d\u7684",l.a.createElement("code",null,"multi")," \u4e3a ",l.a.createElement("code",null,"true"),"\u3002"),l.a.createElement("p",null,"\u4e0b\u9762\u5c06\u540d\u5b57\u4e2d\u6709 ",l.a.createElement("code",null,"'x'")," \u5b57\u7b26\u7684\u5e74\u9f84\u8bbe\u7f6e\u4e3a 10 \u5c81\u3002"),l.a.createElement(c.a,{code:"Model.update({ name: /x/ }, { age: 10 }, { multi: true }, function(err, raw){\n  console.log(raw);\n  // { n: 2, nModified: 2, ok: 1}\n})\n",lang:"js"}),l.a.createElement("p",null,"\u5982\u679c\u8bbe\u7f6e\u7684\u67e5\u627e\u6761\u4ef6\uff0c\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5e76\u4e0d\u6ee1\u8db3\uff0c\u9ed8\u8ba4\u4ec0\u4e48\u4e8b\u90fd\u4e0d\u4f1a\u53d1\u751f\u3002"),l.a.createElement("h3",{id:"updatemany"},l.a.createElement("a",{"aria-hidden":"true",href:"#updatemany"},l.a.createElement("span",{className:"icon icon-link"})),"updateMany"),l.a.createElement("p",null,l.a.createElement("code",null,"updateMany()")," \u4e0e ",l.a.createElement("code",null,"update()"),"  \u65b9\u6cd5\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f\u9ed8\u8ba4\u66f4\u65b0\u591a\u4e2a\u6587\u6863\uff0c\u5373\u4f7f\u8bbe\u7f6e ",l.a.createElement("code",null,"{"," multi: false ","}")," \u4e5f\u65e0\u6cd5\u53ea\u66f4\u65b0\u7b2c\u4e00\u4e2a\u6587\u6863\u3002"),l.a.createElement(c.a,{code:"Model.updateMany(conditions, doc, [options], [callback])\n",lang:"js"}),l.a.createElement("p",null,"\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u540d\u79f0\u5e26\u6709 ",l.a.createElement("code",null,"'x'")," \u7684\u6570\u636e\uff0c\u5e74\u9f84\u53d8\u4e3a 50 \u5c81\uff1a"),l.a.createElement(c.a,{code:"Model.updateMany({ name: /x/ }, { age: 50 }, function(err, raw) {\n  console.log(raw);\n  // { n: 2, nModified: 2, ok: 1 }\n})\n",lang:"js"}),l.a.createElement("h4",{id:"findbyidandupdate"},l.a.createElement("a",{"aria-hidden":"true",href:"#findbyidandupdate"},l.a.createElement("span",{className:"icon icon-link"})),"findByIdAndUpdate"),l.a.createElement(c.a,{code:"Model.findByIdAndUpdate(id, { name: 'xxx', age: 'xxx' })\n",lang:"js"}),l.a.createElement("h2",{id:"\u6587\u6863\u5220\u9664"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6587\u6863\u5220\u9664"},l.a.createElement("span",{className:"icon icon-link"})),"\u6587\u6863\u5220\u9664"),l.a.createElement("p",null,"\u6709\u4e09\u79cd\u65b9\u6cd5\u7528\u4e8e\u6587\u6863\u5220\u9664\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"remove()")),l.a.createElement("li",null,l.a.createElement("code",null,"findOneAndRemove()")),l.a.createElement("li",null,l.a.createElement("code",null,"findByIdAndRemove()"))),l.a.createElement("h3",{id:"remove"},l.a.createElement("a",{"aria-hidden":"true",href:"#remove"},l.a.createElement("span",{className:"icon icon-link"})),"remove"),l.a.createElement("p",null,l.a.createElement("code",null,"remove")," \u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u4e00\u79cd\u6587\u6863\u7684 ",l.a.createElement("code",null,"remove()")," \u65b9\u6cd5\uff0c\u4e00\u79cd\u662f Model \u7684 ",l.a.createElement("code",null,"remove()")," \u65b9\u6cd5\u3002"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u8bed\u6cd5\uff1a")),l.a.createElement(c.a,{code:"Model.remove(conditions, [callback])\n",lang:"js"}),l.a.createElement("p",null,"\u5220\u9664\u6570\u636e\u5e93\u4e2d\u540d\u79f0\u5305\u62ec  30 \u7684\u6570\u636e\u3002"),l.a.createElement(c.a,{code:"model.remove({ name: /30/ }, function(err){})\n",lang:"js"}),l.a.createElement("p",null,"\u26a0\ufe0f ",l.a.createElement("strong",null,"\u6ce8\u610f"),"\uff1a",l.a.createElement("code",null,"remove()")," \u65b9\u6cd5\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u4e0d\u80fd\u7701\u7565\uff0c\u5426\u5219\u6570\u636e\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u5f53\u7136\uff0c\u53ef\u4ee5\u4f7f\u7528 ",l.a.createElement("code",null,"exec()")," \u65b9\u6cd5\u6765\u7b80\u5199\u4ee3\u7801\u3002"),l.a.createElement(c.a,{code:"model.remove({ name: /30/ }).exec()\n",lang:"js"}),l.a.createElement("p",null,"\u6587\u6863\u7684 ",l.a.createElement("code",null,"remove()")," \u65b9\u6cd5\uff1a"),l.a.createElement(c.a,{code:"document.remvoe([callback])\n",lang:"js"}),l.a.createElement("p",null,"\u5220\u9664\u6570\u636e\u5e93\u4e2d\u540d\u79f0\u5305\u542b ",l.a.createElement("code",null,"xie")," \u7684\u6570\u636e\uff1a"),l.a.createElement(c.a,{code:"model.find({ name: /xie/ }, function(err, doc){\n  doc.forEach(function(item, index, arr){\n    item.remove(function(err, doc){\n      console.log(doc);\n      // { _id: xxx, name: 'xie', age: 18 }\n    })\n  })\n})\n",lang:"js"}),l.a.createElement("h2",{id:"\u524d\u540e\u94a9\u5b50"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u524d\u540e\u94a9\u5b50"},l.a.createElement("span",{className:"icon icon-link"})),"\u524d\u540e\u94a9\u5b50"),l.a.createElement("p",null,"\u524d\u540e\u94a9\u5b50\u5373 ",l.a.createElement("code",null,"pre()")," \u548c ",l.a.createElement("code",null,"post()")," \u65b9\u6cd5\uff0c\u53c8\u79f0\u4e3a\u4e2d\u95f4\u4ef6\uff0c\u662f\u5728\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u65f6\u53ef\u4ee5\u6267\u884c\u7684\u51fd\u6570\u3002\u4e2d\u95f4\u4ef6\u5728 Schema \u4e0a\u6307\u5b9a\uff0c\u7c7b\u4f3c\u4e8e\u9759\u6001\u65b9\u6cd5\u6216\u5b9e\u4f8b\u65b9\u6cd5\u7b49\u3002"),l.a.createElement("p",null,"\u53ef\u4ee5\u5728\u6570\u636e\u5e93\u6267\u884c\u4e0b\u5217\u64cd\u4f5c\u65f6\uff0c\u8bbe\u7f6e\u524d\u540e\u94a9\u5b50\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"init()")),l.a.createElement("li",null,l.a.createElement("code",null,"validate()")),l.a.createElement("li",null,l.a.createElement("code",null,"save()")),l.a.createElement("li",null,l.a.createElement("code",null,"remove()")),l.a.createElement("li",null,l.a.createElement("code",null,"count()")),l.a.createElement("li",null,l.a.createElement("code",null,"find()")),l.a.createElement("li",null,l.a.createElement("code",null,"findOne()")),l.a.createElement("li",null,l.a.createElement("code",null,"findOneAndRemove()")),l.a.createElement("li",null,l.a.createElement("code",null,"findOneAndUpdate()")),l.a.createElement("li",null,l.a.createElement("code",null,"insertMany()")),l.a.createElement("li",null,l.a.createElement("code",null,"update()"))),l.a.createElement("h3",{id:"pre"},l.a.createElement("a",{"aria-hidden":"true",href:"#pre"},l.a.createElement("span",{className:"icon icon-link"})),"pre"),l.a.createElement("p",null,"\u4ee5 ",l.a.createElement("code",null,"find()")," \u4e3a\u4f8b\uff0c\u5728\u6267\u884c ",l.a.createElement("code",null,"find()")," \u65b9\u6cd5\u4e4b\u524d\uff0c\u6267\u884c ",l.a.createElement("code",null,"pre()")," \u65b9\u6cd5\u3002"),l.a.createElement(c.a,{code:"const schema = new mongoose.Schema({\n  age: Number,\n  name: String,\n  x: Number,\n  y: Number,\n})\n\nschema.pre('find', function(next){\n  console.log('1')\n  next()\n})\n\nschema.pre('find', function(next){\n  console.log('2')\n})\n\nconst model = mongoose.model('model', schema);\n\nmodel.find(function(err, docs){\n  console.log(docs[0])\n  // 1\n  // 2\n  // { _id: xxx, name: 'xie', age: 18, x: 1, y: 2 }\n})\n",lang:"js"}),l.a.createElement("h3",{id:"post"},l.a.createElement("a",{"aria-hidden":"true",href:"#post"},l.a.createElement("span",{className:"icon icon-link"})),"post"),l.a.createElement("p",null,l.a.createElement("code",null,"post()")," \u65b9\u6cd5\u5e76\u4e0d\u662f\u5728\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u540e\u518d\u53bb\u6267\u884c\u7684\u65b9\u6cd5\uff0c\u800c\u5728\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u524d\u6700\u540e\u6267\u884c\u7684\u65b9\u6cd5\uff0c",l.a.createElement("code",null,"post()")," \u65b9\u6cd5\u91cc\u4e0d\u53ef\u4ee5\u4f7f\u7528 ",l.a.createElement("code",null,"next()"),"\u3002"),l.a.createElement(c.a,{code:"const schema = new mongoose.Schema({ age: Number, name: String, x: Number, y: Number });\nschema.post('find', function(docs){\n  console.log('1')\n})\nschema.post('find', function(docs){\n  console.log('2')\n})\n\nconst model = mongoose.model('model', schema);\nmodel.find(function(err, docs){\n  console.log(docs[0])\n  // 1\n  // 2\n  // { _id: xxx, name: 'xie', age: 18, x: 1, y: 2 }\n})\n",lang:"js"}),l.a.createElement("h2",{id:"\u67e5\u8be2\u540e\u5904\u7406"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u67e5\u8be2\u540e\u5904\u7406"},l.a.createElement("span",{className:"icon icon-link"})),"\u67e5\u8be2\u540e\u5904\u7406"),l.a.createElement("p",null,"\u5e38\u7528\u7684\u67e5\u8be2\u540e\u5904\u7406\u65b9\u6cd5\uff1a"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u65b9\u6cd5"),l.a.createElement("th",null,"\u8bf4\u660e"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"sort"),l.a.createElement("td",null,"\u6392\u5e8f")),l.a.createElement("tr",null,l.a.createElement("td",null,"skip"),l.a.createElement("td",null,"\u8df3\u8fc7")),l.a.createElement("tr",null,l.a.createElement("td",null,"limit"),l.a.createElement("td",null,"\u9650\u5236")),l.a.createElement("tr",null,l.a.createElement("td",null,"select"),l.a.createElement("td",null,"\u663e\u793a\u5b57\u6bb5")),l.a.createElement("tr",null,l.a.createElement("td",null,"exect"),l.a.createElement("td",null,"\u6267\u884c")),l.a.createElement("tr",null,l.a.createElement("td",null,"count"),l.a.createElement("td",null,"\u8ba1\u6570")),l.a.createElement("tr",null,l.a.createElement("td",null,"distinct"),l.a.createElement("td",null,"\u53bb\u91cd")))),l.a.createElement("h3",{id:"sort"},l.a.createElement("a",{"aria-hidden":"true",href:"#sort"},l.a.createElement("span",{className:"icon icon-link"})),"sort"),l.a.createElement("p",null,"\u6309 ",l.a.createElement("code",null,"age")," \u5b57\u6bb5\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u6309 ",l.a.createElement("code",null,"x")," \u4ece\u5c0f\u5230\u5927\u3002"),l.a.createElement(c.a,{code:"model.find().sort('-age').exec(function(err, docs){\n  console.log(docs);\n  // [{ _id: xxx, name: 'star', age: 24, x: 2, y: 2 },\n  //  { _id: xxx, name: 'xing', age: 22, x: 2, y: 1 },\n  //  { _id: xxx, name: 'jun', age: 20, x: 1, y: 2 },\n  //  { _id: xxx, name: 'xie', age: 18, x: 1, y: 1 }]\n})\n",lang:"js"}),l.a.createElement("h3",{id:"skip"},l.a.createElement("a",{"aria-hidden":"true",href:"#skip"},l.a.createElement("span",{className:"icon icon-link"})),"skip"),l.a.createElement("p",null,"\u8df3\u8fc7 2 \u4e2a\uff0c\u663e\u793a\u5176\u5b83\u3002"),l.a.createElement(c.a,{code:"model.find().skip(2).exec(function(err, docs){\n  console.log(docs);\n})\n",lang:"js"}),l.a.createElement("h3",{id:"limit"},l.a.createElement("a",{"aria-hidden":"true",href:"#limit"},l.a.createElement("span",{className:"icon icon-link"})),"limit"),l.a.createElement("p",null,"\u663e\u793a 2 \u4e2a\u3002"),l.a.createElement(c.a,{code:"model.find().limit(2).exec(function(err, docs){\n  console.log(docs);\n})\n",lang:"js"}),l.a.createElement("h3",{id:"select"},l.a.createElement("a",{"aria-hidden":"true",href:"#select"},l.a.createElement("span",{className:"icon icon-link"})),"select"),l.a.createElement("p",null,"\u663e\u793a ",l.a.createElement("code",null,"name"),"\u3001",l.a.createElement("code",null,"age")," \u5b57\u6bb5\uff0c\u4e0d\u663e\u793a ",l.a.createElement("code",null,"_id")," \u5b57\u6bb5\u3002"),l.a.createElement(c.a,{code:"model.find().select('name age -_id').exec(function(err, docs){\n  console.log(docs);\n})\n",lang:"js"}),l.a.createElement(c.a,{code:"model.find().select({ name: 1, age: 1, _id: 0 }).exec(function(err, docs){\n  console.log(docs);\n})\n",lang:"jS"}),l.a.createElement("h3",{id:"count"},l.a.createElement("a",{"aria-hidden":"true",href:"#count"},l.a.createElement("span",{className:"icon icon-link"})),"count"),l.a.createElement("p",null,"\u663e\u793a\u96c6\u5408\u4e2d\u7684\u6587\u6863\u6570\u91cf\u3002"),l.a.createElement(c.a,{code:"model.find().count()\n",lang:"js"}),l.a.createElement("h3",{id:"distinct"},l.a.createElement("a",{"aria-hidden":"true",href:"#distinct"},l.a.createElement("span",{className:"icon icon-link"})),"distinct"),l.a.createElement("p",null,"\u83b7\u53d6\u96c6\u5408\u4e2d\u67d0\u4e2a\u5b57\u6bb5\u7684\u503c\u3002"),l.a.createElement(c.a,{code:"model.find().distinct('age', function(err, distinct){\n  console.log(distinct);\n})\n",lang:"js"}),l.a.createElement("h2",{id:"\u6587\u6863\u9a8c\u8bc1"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6587\u6863\u9a8c\u8bc1"},l.a.createElement("span",{className:"icon icon-link"})),"\u6587\u6863\u9a8c\u8bc1"),l.a.createElement("p",null,"\u5e38\u7528\u9a8c\u8bc1\u5305\u62ec\u4ee5\u4e0b\u51e0\u79cd\uff1a"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u9a8c\u8bc1\u9879"),l.a.createElement("th",null,"\u8bf4\u660e"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"required"),l.a.createElement("td",null,"\u5fc5\u586b\u9879")),l.a.createElement("tr",null,l.a.createElement("td",null,"default"),l.a.createElement("td",null,"\u9ed8\u8ba4\u503c")),l.a.createElement("tr",null,l.a.createElement("td",null,"validate"),l.a.createElement("td",null,"\u81ea\u5b9a\u4e49\u5339\u914d")),l.a.createElement("tr",null,l.a.createElement("td",null,"min"),l.a.createElement("td",null,"\u6700\u5c0f\u503c\uff08\u53ea\u9002\u7528\u4e8e\u6570\u5b57\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,"max"),l.a.createElement("td",null,"\u6700\u5927\u503c\uff08\u53ea\u9002\u7528\u4e8e\u6570\u5b57\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,"match"),l.a.createElement("td",null,"\u6b63\u5219\u5339\u914d\uff08\u53ea\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\uff09")),l.a.createElement("tr",null,l.a.createElement("td",null,"enum"),l.a.createElement("td",null,"\u679a\u4e3e\u5339\u914d\uff08\u53ea\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\uff09")))),l.a.createElement(c.a,{code:"const schema = new mongoose.Schema({\n  name: { type: String, required: true },\n  age: { type: Number, default: 18, min: 0, max: 20 },\n  desc: { type: String, match: /a/, validate: validateLength },\n  color: { type: String, enum: ['red', 'blue', 'yellow', 'green'],\n})\n\nfunction validateLength = function(arg){\n  if (arg.length > 4){\n    return true\n  }\n  return false\n}\n",lang:"js"}),l.a.createElement("h2",{id:"\u8054\u8868\u64cd\u4f5c"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u8054\u8868\u64cd\u4f5c"},l.a.createElement("span",{className:"icon icon-link"})),"\u8054\u8868\u64cd\u4f5c"),l.a.createElement("p",null,"\u8054\u8868\u64cd\u4f5c\uff1a",l.a.createElement("code",null,"population")),l.a.createElement("p",null,"\u4ee5\u7c7b\u522b category \u548c\u6587\u7ae0 article \u4e4b\u95f4\u7684\u5173\u8054\u4e3a\u4f8b\uff1a"),l.a.createElement(c.a,{code:"// \u7c7b\u522b\u6a21\u578b\u5b9a\u4e49\nconst mongoose = require('mongoose');\nconst Schema = mongoose.Schema;\n\nconst CatrgotySchema = new Schema({\n  name: { type: String, required: true, validate: { validator: (v) => v.trim().length, message: '\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a' } },\n  description: { type: String },\n  articles: [{ type: Schema.Types.ObjectId, ref: 'Article' }],\n  recommend: { type: Boolean },\n  index: { type: Number },\n}, { timestamps: true })\n\nmodule.exports = mongoose.model('Category', CategorySchema);\n",lang:"js"}),l.a.createElement(c.a,{code:"// \u6587\u7ae0\u6a21\u578b\u5b9a\u4e49\nconst mongoose = require('mongoose');\nconst Schema = mongoose.Schema;\n\nconst ArticleSchema = new Schema({\n  title: { type: String, required: true, unique: true },\n    description: { type: String },\n  content: { type: String },\n  category: { type: Schema.Types.ObjectId, ref: 'Category', index: true },\n  comments: [{ type: Schema.Types.ObjectId, ref: 'Comment' }],\n  likes: [{ types: Schema.Types.ObjectId, ref: 'Like' }],\n  imgUrl: { type: String },\n  recommend: { type: Boolean },\n  index: { type: Number }\n}, {\n  timestamps: true\n})\n",lang:"js"}),l.a.createElement("p",null,"\u5728\u5bf9\u7c7b\u522b\u7684\u64cd\u4f5c\u4e2d\uff0c\u90fd\u9700\u8981\u4f7f\u7528 ",l.a.createElement("code",null,"populate")," \u64cd\u4f5c\u7b26\u663e\u793a\u51fa\u6240\u5305\u62ec\u7684 Article \u4e2d\u7684 ",l.a.createElement("code",null,"title"),"\u3002"),l.a.createElement(c.a,{code:"/* \u52a0\u8f7d\u6240\u6709\u7c7b\u522b */\napp.get('/catrgories', (req, res) => {\n  Category.find().populate('articles', 'title').select('number name description recommend index').exec((err, doc) => {\n    if (err) return res.status(500).json({ code: 0, message: err.message, err })\n\n    return res.status(200).json({ code: 1, message: '\u83b7\u53d6\u7c7b\u522b\u6210\u529f', result:{ doc } })\n  })\n})\n\n/* \u65b0\u589e\u4e00\u4e2a\u7c7b\u522b */\napp.post('/categories', adminAuth, (req, res) => {\n  new Category(req.body).save((err, doc) => {\n    if (err) return res.status(500).json({ code: 0, message: err.message, err })\n    doc.populate({ path: 'articles', select: 'title' }, (err, doc) => {\n      if (err) return res.status(500).json({ code: 0, message: err.message, err })\n\n            return res.status(200).json({ code: 1, message: '\u65b0\u589e\u6210\u529f', result: { doc } })\n    })\n  })\n})\n",lang:"js"}),l.a.createElement("p",null,"\u5728\u5bf9\u6587\u7ae0\u7684\u64cd\u4f5c\u4e2d\uff0c\u5219\u9700\u8981\u663e\u793a\u51fa\u7c7b\u522b catrgory \u7684 number \u5c5e\u6027\u3002"),l.a.createElement(c.a,{code:"/* \u6309\u7167ID\u52a0\u8f7d\u4e00\u7bc7\u6587\u7ae0 */\napp.get('/articles/:id', (req, res) => {\n  Article.findById(req.params.id).populate('category', 'number').exec((err, doc) => {\n    if (err) return res.status(500).json({ code: 0, message: err.message, err })\n\n    if (doc === null) return res.status(404).json({ code: 0, message: '\u6587\u7ae0\u4e0d\u5b58\u5728' })\n\n    return res.status(200).json({ code: 1, message: '\u83b7\u53d6\u6587\u7ae0\u6210\u529f', result: { doc } })\n  })\n})\n\n/* \u52a0\u8f7d\u6240\u6709\u6587\u7ae0 */\napp.get('/articles', (req, res) => {\n  Article.find().select('title likes comments recommend imgUrl index').populate('category', 'number').sort('-createdAt').exec((err, docs) => {\n    if (err) return res.status(500).json({ code: 0, message: err.message, err })\n  })\n})\n",lang:"js"}),l.a.createElement("p",null,"\u5728\u65b0\u589e\u3001\u66f4\u65b0\u548c\u5220\u9664\u6587\u7ae0\u7684\u64cd\u4f5c\u4e2d\uff0c\u90fd\u9700\u8981\u91cd\u5efa\u4e0e catrgory \u7684\u5173\u8054\u3002"),l.a.createElement(c.a,{code:"/* \u5173\u8054 category \u7684 articles \u6570\u7ec4 */\nrelateCategory = (id) => {\n  Category.findById(id).exec((err, categoryDoc) => {\n    if (err) return res.status(500).json({ code: 0, message: err.message, err })\n\n    if (categoryDoc === null) return res.status(404).json({ code: 0, message: '\u8be5\u7c7b\u522b\u4e0d\u5b58\u5728\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5' })\n\n    Article.find({ category: id }).exec((err, articleDocs) => {\n      if (err) return res.status(500).json({ code: 0, message: err.message, err })\n\n      categoryDoc.articles = articleDocs.map(t => t._id)\n      categoryDoc.save(err => {\n        if (err) return res.status(500).json({ code: 0, message: err.message, err })\n      })\n    })\n  })\n}\n\n/* \u6309\u7167 ID \u66f4\u65b0\u4e00\u7bc7\u6587\u7ae0 */\napp.put('/articles/:id', adminAuth, (req, res) => {\n  Article.findById(req.params.id).exec((err, doc) => {\n    if (err) return res.status(500).json({ status: 0, message: err.message, err })\n\n    if (doc === null) return res.status(404).json({ code: 0, message: '\u6587\u7ae0\u4e0d\u5b58\u5728\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5' });\n    for (prop in req.body) {\n      doc[prop] = req.body[prop]\n    }\n    doc.save((err) => {\n      if (err) return res.status(500).json({ code: 0, message: err.message, err })\n      doc.populate({ path: 'category', select: 'number' }, (err, doc) => {\n        if (err) return res.status(500).json({ code: 0, message: err.message, err })\n\n        relateCategory(doc.category._id);\n\n        return res.status(200).json({ code: 1, message: '\u66f4\u65b0\u6210\u529f', result: { doc } })\n      })\n    })\n  })\n})\n",lang:"js"}),l.a.createElement("p",null,"\u5e38\u7528\u6570\u636e\u5e93\u64cd\u4f5c\u3002"),l.a.createElement("p",null,"\u4ee5 Koa \u4e3a\u4f8b\u3002"),l.a.createElement("h2",{id:"\u83b7\u53d6\u5217\u8868"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u83b7\u53d6\u5217\u8868"},l.a.createElement("span",{className:"icon icon-link"})),"\u83b7\u53d6\u5217\u8868"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u529f\u80fd\u70b9\uff1a")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5206\u9875",l.a.createElement("ul",null,l.a.createElement("li",null,"\u9875\u7801\uff1apageNo"),l.a.createElement("li",null,"\u6bcf\u9875\u6761\u6570\uff1apageSize"))),l.a.createElement("li",null,"\u8fc7\u6ee4\u67e5\u8be2"),l.a.createElement("li",null,"\u641c\u7d22",l.a.createElement("ul",null,l.a.createElement("li",null,"\u6a21\u7cca\u641c\u7d22"),l.a.createElement("li",null,"\u7cbe\u51c6\u641c\u7d22"))),l.a.createElement("li",null,"\u6392\u5e8f",l.a.createElement("ul",null,l.a.createElement("li",null,"\u6b63\u5e8f"),l.a.createElement("li",null,"\u9006\u5e8f")))),l.a.createElement("p",null,l.a.createElement("strong",null,"\u793a\u4f8b\uff1a")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u9ed8\u8ba4\u9996\u9875\uff0c\u5355\u9875 10 \u9879\u6570\u636e")),l.a.createElement(c.a,{code:"let { pageSize = 10 } = ctx.query;\nconst pageNo = Math.max(ctx.query.pageNo * 1, 1) - 1;\npageSize = Math.max(pageSize * 1, 1);\n\n// \u952e\u5bf9\u5e94\u6587\u6863\u540d\uff0c\u503c\u8868\u793a\u6392\u5e8f\u65b9\u5411\uff0c1 \u5347\u5e8f\uff0c-1 \u964d\u5e8f\nconst sort = ctx.query.sortDirections === 'ASC' ? 1 : -1;\n\nArticle.find({}, [], { limit: pageSize, skip: pageNo * pageSize, sort: sort });\n\n// or\nArticle.find()\n  .limit(pageSize)\n  .skip(pageNo * pageSize)\n  .sort({\n    username: 1,\n    age: -1,\n  });\n",lang:"js"}),l.a.createElement("h2",{id:"\u83b7\u53d6\u67d0\u9879"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u83b7\u53d6\u67d0\u9879"},l.a.createElement("span",{className:"icon icon-link"})),"\u83b7\u53d6\u67d0\u9879"),l.a.createElement(c.a,{code:"User.findOne({}, [], function(err, res) {});\n",lang:"js"}),l.a.createElement("p",null,"\u63a5\u6536 id \u4e3a\u53c2\u6570\uff0cid \u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u4e5f\u53ef\u4ee5\u662f ObjectId \u5bf9\u8c61\u3002"),l.a.createElement(c.a,{code:"User.findById(obj._id, function(err, res) {});\n",lang:"js"}),l.a.createElement("h2",{id:"\u7b26\u5408\u6761\u4ef6\u7684\u6587\u6863\u6570"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u7b26\u5408\u6761\u4ef6\u7684\u6587\u6863\u6570"},l.a.createElement("span",{className:"icon icon-link"})),"\u7b26\u5408\u6761\u4ef6\u7684\u6587\u6863\u6570"),l.a.createElement(c.a,{code:"User.count({ type: 'jungle' }, function(err, count) {});\n",lang:"js"}),l.a.createElement("h2",{id:"\u521b\u5efa\u5355\u4e2a\u6587\u6863"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u521b\u5efa\u5355\u4e2a\u6587\u6863"},l.a.createElement("span",{className:"icon icon-link"})),"\u521b\u5efa\u5355\u4e2a\u6587\u6863"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u53c2\u6570\u9274\u5b9a"),l.a.createElement("li",null,"\u552f\u4e00\u6027\u9274\u5b9a")),l.a.createElement(c.a,{code:"const { name } = ctx.request.body;\nconst repeatUser = await Article.findOne({ name });\n\nif (repeatUser) {\n  ctx.throw(409, '\u7528\u6237\u5df2\u5b58\u5728!');\n}\nArticle.create({}, function() {});\n",lang:"js"}),l.a.createElement("h2",{id:"\u66f4\u65b0\u5355\u4e2a\u6587\u6863"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u66f4\u65b0\u5355\u4e2a\u6587\u6863"},l.a.createElement("span",{className:"icon icon-link"})),"\u66f4\u65b0\u5355\u4e2a\u6587\u6863"),l.a.createElement(c.a,{code:"Article.findByIdAndUpdate(ctx.params.id, ctx.request.body);\n",lang:"js"}),l.a.createElement("h2",{id:"\u5220\u9664\u5355\u4e2a\u6587\u6863"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5220\u9664\u5355\u4e2a\u6587\u6863"},l.a.createElement("span",{className:"icon icon-link"})),"\u5220\u9664\u5355\u4e2a\u6587\u6863"),l.a.createElement(c.a,{code:"Article.findByIdAndRemove(ctx.params.id);\n",lang:"js"})))}}}]);