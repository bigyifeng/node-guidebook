(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"0Owb":function(e,n,l){"use strict";function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},a.apply(this,arguments)}l.d(n,"a",(function(){return a}))},"1APg":function(e,n,l){"use strict";l.r(n);var a=l("0Owb"),t=l("q1tI"),r=l.n(t),o=(l("B2uJ"),l("+su7"),l("qOys")),c=l.n(o),m=l("5Yjd"),u=l.n(m),d=r.a.memo((function(){var e=l("K+nK"),n=e(l("q1tI")),a=e(l("th7T")),t=function(){return n["default"].createElement("img",{alt:"Module Load",src:a["default"],width:"640"})};return n["default"].createElement(t)}));n["default"]=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"commonjs"},r.a.createElement("a",{"aria-hidden":"true",href:"#commonjs"},r.a.createElement("span",{className:"icon icon-link"})),"CommonJS"),r.a.createElement("p",null,"Node \u5e94\u7528\u7531\u6a21\u5757\u7ec4\u6210\uff0c\u91c7\u7528 CommonJS \u6a21\u5757\u89c4\u8303\u3002"),r.a.createElement("p",null,"\u6bcf\u4e2a\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u6a21\u5757\uff0c\u6709\u81ea\u5df1\u7684\u4f5c\u7528\u57df\u3002\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc\u9762\u5b9a\u4e49\u7684\u53d8\u91cf\u3001\u51fd\u6570\u3001\u7c7b\uff0c\u90fd\u662f\u79c1\u6709\u7684\uff0c\u5bf9\u5176\u4ed6\u6587\u4ef6\u4e0d\u53ef\u89c1\u3002"),r.a.createElement("p",null,"\u5982\u679c\u60f3\u5728\u591a\u4e2a\u6587\u4ef6\u5206\u4eab\u53d8\u91cf\uff0c\u5fc5\u987b\u5b9a\u4e49\u4e3a ",r.a.createElement("code",null,"global")," \u5bf9\u8c61\u7684\u5c5e\u6027\u3002"),r.a.createElement("p",null,"CommonJS \u89c4\u8303\u89c4\u5b9a\uff0c\u6bcf\u4e2a\u6a21\u5757\u5185\u90e8\uff0c",r.a.createElement("code",null,"module")," \u53d8\u91cf\u4ee3\u8868\u5f53\u524d\u6a21\u5757\u3002\u8fd9\u4e2a\u53d8\u91cf\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u7684 ",r.a.createElement("code",null,"exports")," \u5c5e\u6027\uff08\u5373 ",r.a.createElement("code",null,"module.exports"),"\uff09\u662f\u5bf9\u5916\u7684\u63a5\u53e3\u3002\u52a0\u8f7d\u67d0\u4e2a\u6a21\u5757\uff0c\u5176\u5b9e\u662f\u52a0\u8f7d\u8be5\u6a21\u5757\u7684 ",r.a.createElement("code",null,"module.exports")," \u5c5e\u6027\u3002"),r.a.createElement("p",null,"CommonJS \u6a21\u5757\u7684\u7279\u70b9\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u6240\u6709\u4ee3\u7801\u90fd\u8fd0\u884c\u5728\u6a21\u5757\u4f5c\u7528\u57df\uff0c\u4e0d\u4f1a\u6c61\u67d3\u5168\u5c40\u4f5c\u7528\u57df"),r.a.createElement("li",null,"\u6a21\u5757\u53ef\u4ee5\u591a\u6b21\u52a0\u8f7d\uff0c\u4f46\u662f\u53ea\u4f1a\u5728\u7b2c\u4e00\u6b21\u52a0\u8f7d\u65f6\u8fd0\u884c\u4e00\u6b21\uff0c\u7136\u540e\u8fd0\u884c\u7ed3\u679c\u5c31\u88ab\u7f13\u5b58\u4e86\uff0c\u4ee5\u540e\u518d\u52a0\u8f7d\uff0c\u5c31\u76f4\u63a5\u8bfb\u53d6\u7f13\u5b58\u7ed3\u679c\u3002\u8981\u60f3\u8ba9\u6a21\u5757\u518d\u6b21\u8fd0\u884c\uff0c\u5fc5\u987b\u6e05\u9664\u7f13\u5b58"),r.a.createElement("li",null,"\u6a21\u5757\u52a0\u8f7d\u7684\u987a\u5e8f\uff0c\u6309\u7167\u5176\u5728\u4ee3\u7801\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f")),r.a.createElement("h2",{id:"module"},r.a.createElement("a",{"aria-hidden":"true",href:"#module"},r.a.createElement("span",{className:"icon icon-link"})),"module"),r.a.createElement("p",null,"Node \u5185\u90e8\u63d0\u4f9b\u4e00\u4e2a ",r.a.createElement("a",{href:"https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js",target:"_blank",rel:"noopener noreferrer"},"Module",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))," \u6784\u5efa\u51fd\u6570\u3002\u6240\u6709\u6a21\u5757\u90fd\u662f Module \u7684\u5b9e\u4f8b\u3002"),r.a.createElement(c.a,{code:"// \u975e Node NativeModule\nfunction Module(id, parent) {\n  // \u6a21\u5757\u6807\u8bc6\u7b26\n  this.id = id;\n  // \u8c03\u7528\u8be5\u6a21\u5757\u7684\u6a21\u5757\n  this.parent = parent;\n  // \u6a21\u5757\u5bf9\u5916\u8f93\u51fa\u7684\u503c\n  this.exports = {};\n  this.path = path.dirname(id);\n  this.filename = null;\n  this.loaded = false;\n  updateChildren(parent, this, false);\n  this.children = [];\n}\n\n// Native Module\nfunction NativeModule(id) {\n  this.filename = `${id}.js`;\n  this.id = id;\n  this.exports = {};\n  this.module = undefined;\n  this.exportKeys = undefined;\n  this.loaded = false;\n  this.loading = false;\n  this.canBeRequiredByUsers = !id.startsWith('internal/');\n}\n",lang:"js"}),r.a.createElement("p",null,"\u6bcf\u4e2a\u6a21\u5757\u5185\u90e8\uff0c\u90fd\u6709\u4e00\u4e2a ",r.a.createElement("code",null,"module")," \u5bf9\u8c61\uff0c\u4ee3\u8868\u5f53\u524d\u6a21\u5757\u3002\u5b83\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("code",null,"module.id"),"\uff1a\u6a21\u5757\u7684\u8bc6\u522b\u7b26\uff0c\u901a\u5e38\u662f\u5e26\u6709\u7edd\u5bf9\u8def\u5f84\u7684\u6a21\u5757\u6587\u4ef6\u540d"),r.a.createElement("li",null,r.a.createElement("code",null,"module.filename"),"\uff1a\u6a21\u5757\u7684\u6587\u4ef6\u540d\uff0c\u5e26\u6709\u7edd\u5bf9\u8def\u5f84"),r.a.createElement("li",null,r.a.createElement("code",null,"module.loaded"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u6a21\u5757\u662f\u5426\u5df2\u7ecf\u5b8c\u6210\u52a0\u8f7d"),r.a.createElement("li",null,r.a.createElement("code",null,"module.parent"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u8c03\u7528\u8be5\u6a21\u5757\u7684\u6a21\u5757"),r.a.createElement("li",null,r.a.createElement("code",null,"module.children"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u8868\u793a\u8be5\u6a21\u5757\u8981\u7528\u5230\u7684\u5176\u4ed6\u6a21\u5757"),r.a.createElement("li",null,r.a.createElement("code",null,"module.exports"),"\uff1a\u8868\u793a\u6a21\u5757\u5bf9\u5916\u8f93\u51fa\u7684\u503c")),r.a.createElement("p",null,"\ud83c\udf30 ",r.a.createElement("strong",null,"\u793a\u4f8b\uff1a")),r.a.createElement(c.a,{code:"// index.js\nconst jquery = require('jquery');\n\nexports.$ = jquery;\nconsole.log(module);\n",lang:"js"}),r.a.createElement("p",null,"\u6267\u884c\u8be5\u6587\u4ef6\uff0c\u547d\u4ee4\u884c\u4f1a\u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\u3002"),r.a.createElement(c.a,{code:"{\n  id: '.',\n  exports: { '$': [Function] },\n  parent: null,\n  filename: '/path/to/example.js',\n  loaded: false,\n  children: [\n      {\n        id: '/path/to/node_modules/jquery/dist/jquery.js',\n        exports: [Function],\n        parent: [Circular],\n        filename: '/path/to/node_modules/jquery/dist/jquery.js',\n        loaded: true,\n        children: [],\n        paths: [Object]\n      }\n    ],\n  paths: [\n     '/home/user/deleted/node_modules',\n     '/home/user/node_modules',\n     '/home/node_modules',\n     '/node_modules'\n  ]\n}\n",lang:"js"}),r.a.createElement("ul",null,r.a.createElement("li",null,"\u82e5\u5728\u547d\u4ee4\u884c\u4e0b\u8c03\u7528\u8be5\u6a21\u5757\uff0c\u6bd4\u5982 ",r.a.createElement("code",null,"node index.js"),"\uff0c\u5219 ",r.a.createElement("code",null,"module.parent")," \u4e3a ",r.a.createElement("code",null,"null"),"\u3002"),r.a.createElement("li",null,"\u82e5\u5728\u811a\u672c\u4e4b\u4e2d\u8c03\u7528\uff0c\u6bd4\u5982 ",r.a.createElement("code",null,"require('./index.js)"),"\uff0c\u5219 ",r.a.createElement("code",null,"module.parent")," \u5c31\u662f\u8c03\u7528\u5b83\u7684\u6a21\u5757\u3002")),r.a.createElement("p",null,"\ud83d\udca1 \u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u53ef\u4ee5\u5224\u65ad\u5f53\u524d\u6a21\u5757\u662f\u5426\u4e3a\u5165\u53e3\u811a\u672c\u3002"),r.a.createElement(c.a,{code:"if (!module.parent) {\n  // ran with `node index.js`\n  app.listen(8080, function() {\n    console.log('app listening on port 8080');\n  });\n} else {\n  // used with `require('./index.js')`\n  module.exports = app;\n}\n",lang:"js"}),r.a.createElement("h3",{id:"moduleexports-\u5c5e\u6027"},r.a.createElement("a",{"aria-hidden":"true",href:"#moduleexports-\u5c5e\u6027"},r.a.createElement("span",{className:"icon icon-link"})),"module.exports \u5c5e\u6027"),r.a.createElement("p",null,r.a.createElement("code",null,"module.exports")," \u5c5e\u6027\u8868\u793a\u5f53\u524d\u6a21\u5757\u5bf9\u5916\u8f93\u51fa\u7684\u63a5\u53e3\uff0c\u5176\u4ed6\u6587\u4ef6\u52a0\u8f7d\u8be5\u6a21\u5757\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u8bfb\u53d6 ",r.a.createElement("code",null,"module.exports")," \u53d8\u91cf\u3002"),r.a.createElement(c.a,{code:"const EventEmitter = require('events').EventEmitter;\nmodule.exports = new EventEmitter();\n\nsetTimeout(function() {\n  module.exports.emit('ready');\n}, 1000);\n",lang:"js"}),r.a.createElement("p",null,"\u4e0a\u8ff0\u6a21\u5757\u4f1a\u5728\u52a0\u8f7d\u540e 1 \u79d2\u540e\uff0c\u53d1\u51fa ready \u4e8b\u4ef6\u3002\u5176\u4ed6\u6587\u4ef6\u76d1\u542c\u8be5\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002"),r.a.createElement(c.a,{code:"const eventEmitter = require('./eventEmitter');\n\neventEmitter.on('ready', function() {\n  console.log('module eventEmitter is ready');\n});\n",lang:"js"}),r.a.createElement("h3",{id:"exports-\u53d8\u91cf"},r.a.createElement("a",{"aria-hidden":"true",href:"#exports-\u53d8\u91cf"},r.a.createElement("span",{className:"icon icon-link"})),"exports \u53d8\u91cf"),r.a.createElement("p",null,"\u4e3a\u4e86\u65b9\u4fbf\uff0cNode \u4e3a\u6bcf\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e2a ",r.a.createElement("code",null,"exports")," \u53d8\u91cf\uff0c\u6307\u5411 ",r.a.createElement("code",null,"module.exports"),"\u3002\u8fd9\u7b49\u540c\u5728\u6bcf\u4e2a\u6a21\u5757\u5934\u90e8\uff0c\u6709\u8fd9\u6837\u4e00\u884c\u547d\u4ee4\u3002"),r.a.createElement(c.a,{code:"const exports = module.exports;\n",lang:"js"}),r.a.createElement("p",null,"\u56e0\u6b64\uff0c\u5728\u5bf9\u5916\u8f93\u51fa\u6a21\u5757\u63a5\u53e3\u65f6\uff0c\u53ef\u4ee5\u5411 ",r.a.createElement("code",null,"exports")," \u5bf9\u8c61\u7684 ",r.a.createElement("strong",null,"\u5c5e\u6027")," \u6dfb\u52a0 ",r.a.createElement("strong",null,"\u65b9\u6cd5")," \u548c ",r.a.createElement("strong",null,"\u503c"),"\u3002\uff08\u6ce8\u610f\u662f ",r.a.createElement("code",null,"exports")," \u5bf9\u8c61\u7684\u5c5e\u6027\uff09"),r.a.createElement(c.a,{code:"exports.area = function(r) {\n  return Math.PI * r * r;\n};\n\nexports.circumference = function(r) {\n  return 2 * Math.PI * r;\n};\n\nexports.name = 'mrsingsing';\n\nexports.age = 25;\n",lang:"js"}),r.a.createElement("p",null,"\u6ce8\u610f\uff0c\u4e0d\u80fd\u5c06 exports \u53d8\u91cf\u76f4\u63a5\u6307\u5411\u4e00\u4e2a\u503c\uff0c\u56e0\u4e3a\u8fd9\u6837\u7b49\u4e8e\u65ad\u4e86 ",r.a.createElement("code",null,"exports")," \u548c ",r.a.createElement("code",null,"module.exports")," \u7684\u8054\u7cfb\u3002"),r.a.createElement("p",null,"\u90a3\u5982\u4e0b\u7ed3\u679c\u4f1a\u5982\u4f55\u5bfc\u51fa\uff1f"),r.a.createElement(c.a,{code:"module.exports = 100;\n\n// \u76f8\u5f53\u4e8e\u65ad\u5f00\u4e86\u4e0e module.exports \u7684\u8054\u7cfb\n// \u4ea6\u5373\u65f6 exports \u4e0d\u518d\u6307\u5411 module.exports \u7684\u5185\u5b58\u5730\u5740\n// \u9700\u8981 exports.value = 3 \u624d\u80fd\u5bfc\u51fa\nexports = 3;\n",lang:"js"}),r.a.createElement("p",null,"\u5f88\u663e\u7136\u4f1a\u5bfc\u51fa 100\uff0c\u6bd5\u7adf ",r.a.createElement("code",null,"exports")," \u8fdb\u884c\u4e86\u91cd\u6307\u5411\u3002"),r.a.createElement("p",null,"\u4ee5\u4e0b\u5199\u6cd5\u662f\u65e0\u6548\u7684\u3002"),r.a.createElement(c.a,{code:"exports = function(x) {\n  console.log(x);\n};\n",lang:"js"}),r.a.createElement("p",null,"\u4e0b\u9762\u7684\u5199\u6cd5\u4e5f\u662f\u65e0\u6548\u7684\u3002"),r.a.createElement(c.a,{code:"exports.hello = function() {\n  return 'hello';\n};\n\nmodule.exports = 'Hello world!';\n",lang:"js"}),r.a.createElement("p",null,"\u4e0a\u9762\u4ee3\u7801\uff0c",r.a.createElement("code",null,"hello")," \u51fd\u6570\u662f\u65e0\u6cd5\u5bf9\u5916\u8f93\u51fa\u7684\uff0c\u56e0\u4e3a ",r.a.createElement("code",null,"module.exports")," \u88ab\u91cd\u65b0\u8d4b\u503c\u4e86\u3002"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u4e00\u4e2a\u6a21\u5757\u7684\u5bf9\u5916\u63a5\u53e3\uff0c\u5c31\u662f\u4e00\u4e2a\u5355\u4e00\u7684\u503c\uff0c\u4e0d\u80fd\u4f7f\u7528 ",r.a.createElement("code",null,"exports")," \u8f93\u51fa\uff0c\u53ea\u80fd\u4f7f\u7528 ",r.a.createElement("code",null,"module.exports")," \u8f93\u51fa\u3002"),r.a.createElement("li",null,"\u5982\u679c\u8981\u8f93\u51fa\u591a\u4e2a\u503c\uff0c\u5219\u9700\u8981\u6302\u8f7d\u5230 ",r.a.createElement("code",null,"exports")," \u8eab\u4e0a\uff0c\u4f8b\u5982 ",r.a.createElement("code",null,"exports.a = xx"),"\u3001",r.a.createElement("code",null,"exports.b = xx"),"\u3002")),r.a.createElement("p",null,"\u5982\u679c\u89c9\u5f97 ",r.a.createElement("code",null,"exports")," \u548c ",r.a.createElement("code",null,"module.exports")," \u4e4b\u95f4\u7684\u533a\u522b\u5f88\u96be\u5206\u6e05\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u5c31\u662f\u653e\u5f03\u4f7f\u7528 ",r.a.createElement("code",null,"exports"),"\uff0c\u53ea\u4f7f\u7528 ",r.a.createElement("code",null,"module.exports"),"\u3002"),r.a.createElement("h3",{id:"\u6a21\u5757\u5bfc\u51fa\u6e90\u7801\u5206\u6790"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u6a21\u5757\u5bfc\u51fa\u6e90\u7801\u5206\u6790"},r.a.createElement("span",{className:"icon icon-link"})),"\u6a21\u5757\u5bfc\u51fa\u6e90\u7801\u5206\u6790"),r.a.createElement("p",null,"\u4ece\u6e90\u7801\u4e2d\u53ef\u4ee5\u770b\u51fa ",r.a.createElement("code",null,"exports")," \u7684\u5b9e\u8d28\u3002"),r.a.createElement(c.a,{code:"const dirname = path.dirname(filename);\nconst require = makeRequireFunction(this, redirects);\nlet result;\n// \u76f8\u5f53\u4e8e exports \u5f15\u7528 module.exports\nconst exports = this.exports;\nconst thisValue = exports;\nconst module = this;\n\nif (requireDepth === 0) statCache = new Map();\n\nif (inspectorWrapper) {\n  result = inspectorWrapper(\n    compiledWrapper,\n    thisValue,\n    exports,\n    require,\n    module,\n    filename,\n    dirname\n  );\n} else {\n  result = compiledWrapper.call(thisValue, exports, require, module, filename, dirname);\n}\n",lang:"js"}),r.a.createElement("p",null,"\u800c Node \u4e2d\u6240\u6709\u7684\u6a21\u5757\u4ee3\u7801\u90fd\u4f1a\u88ab\u5305\u88f9\u5728\u8fd9\u4e2a\u51fd\u6570\u4e2d\uff1a"),r.a.createElement(c.a,{code:"// __filename \u5f53\u524d\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n// __dirname  \u5f53\u524d\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84\n(function(exports, require, module, __filename, __dirname) {\n  exports.a = 3;\n});\n",lang:"js"}),r.a.createElement("h3",{id:"\u6a21\u5757\u52a0\u8f7d\u539f\u7406\u7b80\u8ff0"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u6a21\u5757\u52a0\u8f7d\u539f\u7406\u7b80\u8ff0"},r.a.createElement("span",{className:"icon icon-link"})),"\u6a21\u5757\u52a0\u8f7d\u539f\u7406\u7b80\u8ff0"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://juejin.im/post/6844904042037002254",target:"_blank",rel:"noopener noreferrer"},"Node \u7684\u6a21\u5757\u8fd0\u884c\u673a\u5236",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))))),r.a.createElement(u.a,Object(a["a"])({source:{jsx:"import React from 'react';\nimport img from '../../assets/module/module-load-workflow.png';\n\nexport default () => <img alt=\"Module Load\" src={img} width=\"640\" />;"}},{inline:!0,dependencies:{},files:{}}),r.a.createElement(d,null)),r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"\u53c2\u8003\u6e90\u7801\uff1a",r.a.createElement("a",{href:"https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js",target:"_blank",rel:"noopener noreferrer"},"node/lib/internal/modules/cjs/loader.js",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),r.a.createElement(c.a,{code:"// Check the cache for the requested file.\n// 1. If a module already exists in the cache: return its exports object.\n// 2. If the module is native: call\n//    `NativeModule.prototype.compileForPublicLoader()` and return the exports.\n// 3. Otherwise, create a new module for the file and save it to the cache.\n//    Then have it load  the file contents before returning its exports\n//    object.\nModule._load = function(request, parent, isMain) {\n    let relResolveCacheIdentifier;\n    if (parent) {\n      debug('Module._load REQUEST %s parent: %s', request, parent.id);\n      ...\n    }\n    // \u67e5\u627e\u6587\u4ef6\u5177\u4f53\u4f4d\u7f6e\n    const filename = Module._resolveFilename(request, parent, isMain);\n    // \u5b58\u5728\u7f13\u5b58\uff0c\u5219\u4e0d\u9700\u8981\u518d\u6b21\u6267\u884c \u8fd4\u56de\u7f13\u5b58\n    const cachedModule = Module._cache[filename];\n    if (cachedModule !== undefined) {\n      updateChildren(parent, cachedModule, true);\n      if (!cachedModule.loaded)\n        return getExportsForCircularRequire(cachedModule);\n      return cachedModule.exports;\n    }\n    // \u52a0\u8f7dnode\u539f\u751f\u6a21\u5757\uff0c\u539f\u751f\u6a21\u5757loadNativeModule\n    // \u5982\u679c\u6709 \u4e14\u80fd\u88ab\u7528\u6237\u5f15\u7528 \u8fd4\u56de mod.exports\uff08\u8fd9\u5305\u62ecnode\u6a21\u5757\u7684\u7f16\u8bd1\u521b\u5efamodule\u5bf9\u8c61\uff0c\u5c06\u6a21\u5757\u8fd0\u884c\u7ed3\u679c\u4fdd\u5b58\u5728module\u5bf9\u8c61\u4e0a\uff09\n    const mod = loadNativeModule(filename, request);\n    if (mod && mod.canBeRequiredByUsers) return mod.exports;\n\n    // \u521b\u5efa\u4e00\u4e2a\u6a21\u5757\n    // Don't call updateChildren(), Module constructor already does.\n    const module = new Module(filename, parent);\n\n    if (isMain) {\n      process.mainModule = module;\n      module.id = '.';\n    }\n    // \u7f13\u5b58\u6a21\u5757\n    Module._cache[filename] = module;\n    if (parent !== undefined) {\n      relativeResolveCache[relResolveCacheIdentifier] = filename;\n    }\n    // \u52a0\u8f7d\u6267\u884c\u65b0\u7684\u6a21\u5757\n    module.load(filename);\n\n    return module.exports;\n  };\n",lang:"js"}),r.a.createElement("p",null,"Node \u7f13\u5b58\u7684\u662f\u7f16\u8bd1\u548c\u6267\u884c\u540e\u7684\u5bf9\u8c61\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u76f8\u540c",r.a.createElement("ul",null,r.a.createElement("li",null,"Node \u6a21\u5757\u548c\u975e Node \u58a8\u83ca\u7231\u7ecf\u5386\u7684\u8fc7\u7a0b\u90fd\u662f\uff0c\u6709\u6267\u884c\u540e\u7684\u7f13\u5b58\u5bf9\u8c61\uff0c\u8fd4\u56de\u7f13\u5b58\u5bf9\u8c61"),r.a.createElement("li",null,"\u6ca1\u6709\u6267\u884c\u540e\u7684\u7f13\u5b58\u5bf9\u8c61\uff0c\u521b\u5efa ",r.a.createElement("code",null,"module")," \u5bf9\u8c61\uff0c\u6267\u884c\u6a21\u5757\uff0c\u5b58\u50a8\u6267\u884c\u540e\u5f97\u5230\u7684\u5bf9\u8c61\uff0c\u8fd4\u56de\u6267\u884c\u540e\u7684\u7ed3\u679c ",r.a.createElement("code",null,"exports")))),r.a.createElement("li",null,"\u4e0d\u540c",r.a.createElement("ul",null,r.a.createElement("li",null,"\u7f13\u5b58\u5bf9\u8c61\u4e0d\u540c"),r.a.createElement("li",null,"\u52a0\u8f7d\u6a21\u5757\u6587\u4ef6\u65b9\u5f0f\u4e0d\u540c")))),r.a.createElement("h2",{id:"require"},r.a.createElement("a",{"aria-hidden":"true",href:"#require"},r.a.createElement("span",{className:"icon icon-link"})),"require"),r.a.createElement("p",null,"Node \u4f7f\u7528 CommonJS \u6a21\u5757\u89c4\u8303\uff0c\u5185\u7f6e\u7684 ",r.a.createElement("code",null,"require")," \u547d\u4ee4\u7528\u4e8e\u52a0\u8f7d\u6a21\u5757\u6587\u4ef6\u3002"),r.a.createElement("p",null,r.a.createElement("code",null,"require")," \u547d\u4ee4\u7684\u57fa\u672c\u529f\u80fd\u5c31\u662f\uff0c\u8bfb\u5165\u5e76\u6267\u884c\u4e00\u4e2a JavaScript \u6587\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u8be5\u6a21\u5757\u7684 ",r.a.createElement("code",null,"exports")," \u5bf9\u8c61\u3002\u5982\u679c\u6ca1\u6709\u53d1\u73b0\u6307\u5b9a\u6a21\u5757\uff0c\u4f1a\u62a5\u9519\u3002"),r.a.createElement(c.a,{code:"// index.js\nvar invisible = function() {\n  console.log('invisible');\n};\n\nexports.message = 'hi';\n\nexports.say = function() {\n  console.log(message);\n};\n",lang:"js"}),r.a.createElement("p",null,"\u5982\u679c\u6a21\u5757\u8f93\u51fa\u7684\u4ec5\u6709\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u5c31\u4e0d\u80fd\u5b9a\u4e49\u5728 ",r.a.createElement("code",null,"exports")," \u5bf9\u8c61\u4e0a\uff0c\u800c\u8981\u5b9a\u4e49\u5728 ",r.a.createElement("code",null,"module.exports")," \u53d8\u91cf\u4e0a\u3002"),r.a.createElement(c.a,{code:"module.exports = function() {\n  console.log('hello world!');\n};\n\nrequire('./index.js');\n",lang:"js"}),r.a.createElement("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",r.a.createElement("code",null,"require")," \u547d\u4ee4\u8c03\u7528\u81ea\u8eab\uff0c\u7b49\u4e8e\u662f\u6267\u884c ",r.a.createElement("code",null,"module.exports"),"\uff0c\u56e0\u6b64\u4f1a\u8f93\u51fa ",r.a.createElement("code",null,"hello world!"),"\u3002"),r.a.createElement("h3",{id:"\u52a0\u8f7d\u89c4\u5219"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u52a0\u8f7d\u89c4\u5219"},r.a.createElement("span",{className:"icon icon-link"})),"\u52a0\u8f7d\u89c4\u5219"),r.a.createElement("p",null,r.a.createElement("code",null,"require")," \u547d\u4ee4\u7528\u4e8e\u52a0\u8f7d\u6587\u4ef6\uff0c\u540e\u7f00\u540d\u9ed8\u8ba4\u4e3a ",r.a.createElement("code",null,".js"),"\u3002"),r.a.createElement(c.a,{code:"var foo = require('foo');\n//  \u7b49\u540c\u4e8e\nvar foo = require('foo.js');\n",lang:"js"}),r.a.createElement("p",null,"\u6839\u636e\u53c2\u6570\u7684\u4e0d\u540c\u683c\u5f0f\uff0c",r.a.createElement("code",null,"require")," \u547d\u4ee4\u53bb\u4e0d\u540c\u8def\u5f84\u5bfb\u627e\u6a21\u5757\u6587\u4ef6\u3002"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u4ee5 ",r.a.createElement("code",null,"/")," \u5f00\u5934\uff0c\u5219\u8868\u793a\u52a0\u8f7d\u7684\u662f\u4e00\u4e2a\u4f4d\u4e8e",r.a.createElement("strong",null,"\u7edd\u5bf9\u8def\u5f84"),"\u7684\u6a21\u5757\u6587\u4ef6\u3002\u6bd4\u5982\uff0c",r.a.createElement("code",null,"require('/home/marco/foo.js')")," \u5c06\u52a0\u8f7d ",r.a.createElement("code",null,"/home/marco/foo.js"),"\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u4ee5 ",r.a.createElement("code",null,"./")," \u5f00\u5934\uff0c\u5219\u8868\u793a\u52a0\u8f7d\u7684\u662f\u4e00\u4e2a\u4f4d\u4e8e",r.a.createElement("strong",null,"\u76f8\u5bf9\u8def\u5f84"),"\uff08\u8ddf\u5f53\u524d\u6267\u884c\u811a\u672c\u7684\u4f4d\u7f6e\u76f8\u6bd4\uff09\u7684\u6a21\u5757\u6587\u4ef6\u3002\u6bd4\u5982\uff0c",r.a.createElement("code",null,"require('./foo')")," \u5c06\u52a0\u8f7d\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 ",r.a.createElement("code",null,"foo.js"),"\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u4e0d\u4ee5 ",r.a.createElement("code",null,"./")," \u6216 ",r.a.createElement("code",null,"/")," \u5f00\u5934\uff0c\u5219\u8868\u793a\u52a0\u8f7d\u7684\u662f\u4e00\u4e2a",r.a.createElement("strong",null,"\u9ed8\u8ba4\u63d0\u4f9b\u7684\u6838\u5fc3\u6a21\u5757"),"\uff08\u4f4d\u4e8e Node \u7684\u7cfb\u7edf\u5b89\u88c5\u76ee\u5f55\u4e2d\uff09\uff0c\u6216\u8005\u4e00\u4e2a\u4f4d\u4e8e\u5404\u7ea7 ",r.a.createElement("code",null,"node_modules")," \u76ee\u5f55\u7684\u5df2\u5b89\u88c5\u6a21\u5757\uff08\u5168\u5c40\u5b89\u88c5\u6216\u5c40\u90e8\u5b89\u88c5\uff09\u3002"))),r.a.createElement("p",null,"\u4e3e\u4f8b\u6765\u8bf4\uff0c\u811a\u672c ",r.a.createElement("code",null,"/home/user/projects/foo.js")," \u6267\u884c\u4e86 ",r.a.createElement("code",null,"require('bar.js')")," \u547d\u4ee4\uff0cNode \u4f1a\u4f9d\u6b21\u641c\u7d22\u4ee5\u4e0b\u6587\u4ef6\uff1a"),r.a.createElement(c.a,{code:"# Node \u5b89\u88c5\u5168\u5c40\u4f9d\u8d56\u7684\u76ee\u5f55\n/usr/local/lib/node/bar.js\n# \u5f53\u524d\u6587\u4ef6\u5939\u4f9d\u8d56\u76ee\u5f55\n/home/user/projects/node_modules/bar.js\n# \u7236\u76ee\u5f55\u4f9d\u8d56\u76ee\u5f55\n/home/user/node_modules/bar.js\n# \u7236\u76ee\u5f55\u7684\u7236\u76ee\u5f55\u4f9d\u8d56\u76ee\u5f55\n/home/node_modules/bar.js\n# \u6cbf\u8def\u5f84\u5411\u4e0a\u9010\u7ea7\u9012\u5f52\uff0c\u76f4\u5230\u6839\u76ee\u5f55\u4e0b\u7684\u4f9d\u8d56\u76ee\u5f55\n/node_modules/bar.js\n",lang:"bash"}),r.a.createElement("p",null,"\u8fd9\u79cd\u8def\u5f84\u7684\u751f\u6210\u65b9\u5f0f\u4e0e JavaScript \u7684\u539f\u578b\u94fe\u6216\u4f5c\u7528\u57df\u7684\u67e5\u627e\u65b9\u5f0f\u5341\u5206\u7c7b\u4f3c\u3002\u5728\u52a0\u8f7d\u7684\u8fc7\u7a0b\u4e2d\uff0cNode \u4f1a\u9010\u4e2a\u5c1d\u8bd5\u6a21\u5757\u8def\u5f84\u4e2d\u7684\u8def\u5f84\uff0c\u76f4\u5230\u627e\u5230\u76ee\u6807\u6587\u4ef6\u4e3a\u6b62\u3002\u53ef\u4ee5\u770b\u51fa\uff0c\u5f53\u524d\u6587\u4ef6\u7684\u8def\u5f84\u8d8a\u6df1\uff0c\u6a21\u5757\u67e5\u627e\u8017\u65f6\u4f1a\u8d8a\u591a\uff0c\u8fd9\u662f\u81ea\u5b9a\u4e49\u6a21\u5757\u7684\u52a0\u8f7d\u901f\u5ea6\u662f\u6700\u6162\u7684\u539f\u56e0\u3002"),r.a.createElement("ol",{start:"4"},r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u4e0d\u4ee5 ",r.a.createElement("code",null,"./")," \u6216 ",r.a.createElement("code",null,"/")," \u5f00\u5934\uff0c\u800c\u4e14\u662f\u4e00\u4e2a\u8def\u5f84\uff0c\u6bd4\u5982 ",r.a.createElement("code",null,"require('example/path/to/file')"),"\uff0c\u5219\u5c06\u5148\u627e\u5230 ",r.a.createElement("code",null,"example")," \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u518d\u4ee5\u5b83\u4e3a\u53c2\u6570\uff0c\u627e\u5230\u540e\u7eed\u8def\u5f84\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u6307\u5b9a\u7684\u6a21\u5757\u6587\u4ef6\u6ca1\u6709\u53d1\u73b0\uff0cNode \u4f1a\u5c1d\u8bd5\u4e3a\u6587\u4ef6\u540d\u6dfb\u52a0 ",r.a.createElement("code",null,".js"),"\u3001",r.a.createElement("code",null,".json"),"\u3001",r.a.createElement("code",null,".node")," \u540e\uff0c\u518d\u53bb\u641c\u7d22\u3002",r.a.createElement("code",null,".js")," \u4ef6\u4f1a\u4ee5\u6587\u672c\u683c\u5f0f\u7684 JavaScript \u811a\u672c\u6587\u4ef6\u89e3\u6790\uff0c",r.a.createElement("code",null,".json")," \u6587\u4ef6\u4f1a\u4ee5 JSON \u683c\u5f0f\u7684\u6587\u672c\u6587\u4ef6\u89e3\u6790\uff0c",r.a.createElement("code",null,".node")," \u6587\u4ef6\u4f1a\u4ee5\u7f16\u8bd1\u540e\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u89e3\u6790\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u60f3\u5f97\u5230 ",r.a.createElement("code",null,"require")," \u547d\u4ee4\u52a0\u8f7d\u7684",r.a.createElement("strong",null,"\u786e\u5207\u6587\u4ef6\u540d"),"\uff0c\u4f7f\u7528 ",r.a.createElement("code",null,"require.resolve()")," \u65b9\u6cd5\u3002")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u4e3a\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u5219\u81ea\u52a8\u67e5\u627e\u8be5\u6587\u4ef6\u5939\u4e0b\u7684 ",r.a.createElement("code",null,"package.json")," \u6587\u4ef6\uff0c\u7136\u540e\u518d\u52a0\u8f7d\u8be5\u6587\u4ef6\u5f53\u4e2d ",r.a.createElement("code",null,"main")," \u5b57\u6bb5\u6240\u6307\u5b9a\u7684\u5165\u53e3\u6587\u4ef6\uff08\u82e5\u6ca1\u6709 ",r.a.createElement("code",null,"package.json")," \u6587\u4ef6\u6216\u8be5\u6587\u4ef6\u4e2d\u65e0 ",r.a.createElement("code",null,"main")," \u5b57\u6bb5\uff0c\u5219\u9ed8\u8ba4\u67e5\u627e\u8be5\u6587\u4ef6\u5939\u4e0b\u7684 ",r.a.createElement("code",null,"index.js")," \u6587\u4ef6\u4f5c\u4e3a\u6a21\u5757\u6765\u8f7d\u5165\uff09"))),r.a.createElement("p",null,"\u26a0\ufe0f ",r.a.createElement("strong",null,"\u6ce8\u610f"),"\uff1aNode \u7684\u7cfb\u7edf\u6a21\u5757\u7684\u4f18\u5148\u7ea7\u6700\u9ad8\uff0c\u4e00\u65e6\u6709\u7b2c\u4e09\u65b9\u6a21\u5757\u5305\u4e0e\u6838\u5fc3\u6a21\u5757\u91cd\u540d\uff0c\u5219\u4ee5 Node \u5185\u7f6e\u6838\u5fc3\u6a21\u5757\u4e3a\u51c6\u3002"),r.a.createElement("h3",{id:"\u76ee\u5f55\u7684\u52a0\u8f7d\u89c4\u5219"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u76ee\u5f55\u7684\u52a0\u8f7d\u89c4\u5219"},r.a.createElement("span",{className:"icon icon-link"})),"\u76ee\u5f55\u7684\u52a0\u8f7d\u89c4\u5219"),r.a.createElement("p",null,"\u901a\u5e38\uff0c\u6211\u4eec\u4f1a\u628a\u76f8\u5173\u7684\u6587\u4ef6\u4f1a\u653e\u5728\u4e00\u4e2a\u76ee\u5f55\u91cc\u9762\uff0c\u4fbf\u4e8e\u7ec4\u7ec7\u3002\u8fd9\u65f6\uff0c\u6700\u597d\u4e3a\u8be5\u76ee\u5f55\u8bbe\u7f6e\u4e00\u4e2a\u5165\u53e3\u6587\u4ef6\uff0c\u8ba9 ",r.a.createElement("code",null,"require")," \u65b9\u6cd5\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5165\u53e3\u6587\u4ef6\uff0c\u52a0\u8f7d\u6574\u4e2a\u76ee\u5f55\u3002"),r.a.createElement("p",null,"\u5728\u76ee\u5f55\u4e2d\u653e\u7f6e\u4e00\u4e2a ",r.a.createElement("code",null,"package.json")," \u6587\u4ef6\uff0c\u5e76\u4e14\u5c06\u5165\u53e3\u6587\u4ef6\u5199\u5165 ",r.a.createElement("code",null,"main")," \u5b57\u6bb5\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002"),r.a.createElement(c.a,{code:'{\n  "name": "some-library",\n  "main": "./lib/some-library.js"\n}\n',lang:"json"}),r.a.createElement("p",null,r.a.createElement("code",null,"require")," \u53d1\u73b0\u53c2\u6570\u5b57\u7b26\u4e32\u6307\u5411\u4e00\u4e2a\u76ee\u5f55\u4ee5\u540e\uff0c\u4f1a\u81ea\u52a8\u67e5\u770b\u8be5\u76ee\u5f55\u7684 ",r.a.createElement("code",null,"package.json")," \u6587\u4ef6\uff0c\u7136\u540e\u52a0\u8f7d ",r.a.createElement("code",null,"main")," \u5b57\u6bb5\u6307\u5b9a\u7684\u5165\u53e3\u6587\u4ef6\u3002\u5982\u679c ",r.a.createElement("code",null,"package.json")," \u6587\u4ef6\u6ca1\u6709 ",r.a.createElement("code",null,"main")," \u5b57\u6bb5\uff0c\u6216\u8005\u6839\u672c\u5c31\u6ca1\u6709 ",r.a.createElement("code",null,"package.json")," \u6587\u4ef6\uff0c\u5219\u4f1a\u52a0\u8f7d\u8be5\u76ee\u5f55\u4e0b\u7684 ",r.a.createElement("code",null,"index.js")," \u6587\u4ef6\u6216 ",r.a.createElement("code",null,"index.node")," \u6587\u4ef6\u3002"),r.a.createElement("blockquote",null,r.a.createElement("p",null,"\u4e8b\u5b9e\u4e0a\uff0c\u4e0d\u540c\u7684\u6a21\u5757\u89c4\u8303\u4f1a\u53c2\u7167 ",r.a.createElement("code",null,"package.json")," \u4e2d\u7684\u4e0d\u540c\u5b57\u6bb5\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("code",null,"main"),"\uff1aCommonJS \u6a21\u5757"),r.a.createElement("li",null,r.a.createElement("code",null,"module"),"\uff1aES Module \u6a21\u5757"),r.a.createElement("li",null,r.a.createElement("code",null,"unpkg"),"\uff1a\u6253\u5305\u538b\u7f29\u6587\u4ef6"),r.a.createElement("li",null,r.a.createElement("code",null,"typings"),"\uff1aTypeScript \u5b9a\u4e49\u6587\u4ef6"))),r.a.createElement("h3",{id:"\u6a21\u5757\u7684\u7f13\u5b58"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u6a21\u5757\u7684\u7f13\u5b58"},r.a.createElement("span",{className:"icon icon-link"})),"\u6a21\u5757\u7684\u7f13\u5b58"),r.a.createElement("p",null,"\u7b2c\u4e00\u6b21\u52a0\u8f7d\u67d0\u4e2a\u6a21\u5757\u65f6\uff0cNode \u4f1a\u7f13\u5b58\u8be5\u6a21\u5757\u3002\u4ee5\u540e\u518d\u52a0\u8f7d\u8be5\u6a21\u5757\uff0c\u5c31\u76f4\u63a5\u4ece\u7f13\u5b58\u53d6\u51fa\u8be5\u6a21\u5757\u7684 ",r.a.createElement("code",null,"module.exports")," \u5c5e\u6027\u3002"),r.a.createElement(c.a,{code:"require('./example.js');\nrequire('./example.js').message = 'hello';\nrequire('./example.js').message;\n// \"hello\"\n",lang:"js"}),r.a.createElement("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8fde\u7eed\u4e09\u6b21\u4f7f\u7528 ",r.a.createElement("code",null,"require")," \u547d\u4ee4\uff0c\u52a0\u8f7d\u540c\u4e00\u4e2a\u6a21\u5757\u3002\u7b2c\u4e8c\u6b21\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u4e3a\u8f93\u51fa\u7684\u5bf9\u8c61\u6dfb\u52a0\u4e86\u4e00\u4e2a ",r.a.createElement("code",null,"message")," \u5c5e\u6027\u3002\u4f46\u662f\u7b2c\u4e09\u6b21\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a ",r.a.createElement("code",null,"message")," \u5c5e\u6027\u4f9d\u7136\u5b58\u5728\uff0c\u8fd9\u5c31\u8bc1\u660e ",r.a.createElement("code",null,"require")," \u547d\u4ee4\u5e76\u6ca1\u6709\u91cd\u65b0\u52a0\u8f7d\u6a21\u5757\u6587\u4ef6\uff0c\u800c\u662f\u8f93\u51fa\u4e86\u7f13\u5b58\u3002"),r.a.createElement("p",null,"\ud83d\udca1 ",r.a.createElement("strong",null,"TIPS"),"\uff1a\u5982\u679c\u60f3\u8981\u591a\u6b21\u6267\u884c\u67d0\u4e2a\u6a21\u5757\uff0c\u53ef\u4ee5\u8ba9\u8be5\u6a21\u5757\u8f93\u51fa\u4e00\u4e2a",r.a.createElement("strong",null,"\u51fd\u6570"),"\uff0c\u7136\u540e\u6bcf\u6b21 ",r.a.createElement("code",null,"require")," \u8fd9\u4e2a\u6a21\u5757\u7684\u65f6\u5019\uff0c\u91cd\u65b0\u6267\u884c\u4e00\u4e0b\u8f93\u51fa\u7684\u51fd\u6570\u3002"),r.a.createElement("p",null,"\u6240\u6709\u7f13\u5b58\u7684\u6a21\u5757\u4fdd\u5b58\u5728 ",r.a.createElement("code",null,"require.cache")," \u4e4b\u4e2d\uff0c\u5982\u679c\u60f3\u5220\u9664\u6a21\u5757\u7684\u7f13\u5b58\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002"),r.a.createElement(c.a,{code:"// \u5220\u9664\u6307\u5b9a\u6a21\u5757\u7684\u7f13\u5b58\ndelete require.cache[moduleName];\n\n// \u5220\u9664\u6240\u6709\u6a21\u5757\u7684\u7f13\u5b58\nObject.keys(require.cache).forEach(function(key) {\n  delete require.cache[key];\n});\n",lang:"js"}),r.a.createElement("p",null,"\u26a0\ufe0f ",r.a.createElement("strong",null,"\u6ce8\u610f"),"\uff1a\u7f13\u5b58\u662f\u6839\u636e ",r.a.createElement("strong",null,"\u7edd\u5bf9\u8def\u5f84")," \u8bc6\u522b\u6a21\u5757\u7684\uff0c\u5982\u679c\u540c\u6837\u7684\u6a21\u5757\u540d\uff0c\u4f46\u662f\u4fdd\u5b58\u5728\u4e0d\u540c\u7684\u8def\u5f84\uff0c",r.a.createElement("code",null,"require")," \u547d\u4ee4\u8fd8\u662f\u4f1a\u91cd\u65b0\u52a0\u8f7d\u8be5\u6a21\u5757\u3002"),r.a.createElement("h3",{id:"\u5faa\u73af\u52a0\u8f7d"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5faa\u73af\u52a0\u8f7d"},r.a.createElement("span",{className:"icon icon-link"})),"\u5faa\u73af\u52a0\u8f7d"),r.a.createElement("p",null,"\u5982\u679c\u53d1\u751f\u6a21\u5757\u7684 ",r.a.createElement("strong",null,"\u5faa\u73af\u52a0\u8f7d"),"\uff0c\u5373 ",r.a.createElement("code",null,"foo")," \u52a0\u8f7d ",r.a.createElement("code",null,"bar"),"\uff0c",r.a.createElement("code",null,"bar")," \u53c8\u52a0\u8f7d ",r.a.createElement("code",null,"foo"),"\uff0c\u5219 ",r.a.createElement("code",null,"bar")," \u5c06\u52a0\u8f7d ",r.a.createElement("code",null,"foo")," \u7684 ",r.a.createElement("strong",null,"\u4e0d\u5b8c\u6574\u7248\u672c"),"\u3002"),r.a.createElement(c.a,{code:"// foo.js\nconsole.log('foo start');\nexports.done = false;\nconst bar = require('./bar');\nconsole.log('\u5728 foo \u4e2d\uff0cbar.done = %j', bar.done);\nexports.done = true;\nconsole.log('foo end');\n\n// bar.js\nconsole.log('bar start');\nexports.done = false;\nconst foo = require('./foo');\nconsole.log('\u5728 bar \u4e2d\uff0cfoo.done = %j', foo.done);\nexports.done = true;\nconsole.log('bar end');\n\n// main.js\nconsole.log('main start');\nconst foo = require('./foo');\nconst bar = require('./bar');\nconsole.log('\u5728 main \u4e2d\uff0cfoo.done=%j\uff0cbar.done=%j', foo.done, bar.done);\n",lang:"js"}),r.a.createElement("p",null,"\u5f53 ",r.a.createElement("code",null,"main.js")," \u52a0\u8f7d ",r.a.createElement("code",null,"foo.js")," \u65f6\uff0c",r.a.createElement("code",null,"foo.js")," \u53c8\u52a0\u8f7d ",r.a.createElement("code",null,"bar.js"),"\u3002 \u6b64\u65f6\uff0c",r.a.createElement("code",null,"bar.js")," \u4f1a\u5c1d\u8bd5\u53bb\u52a0\u8f7d ",r.a.createElement("code",null,"foo.js"),"\u3002 \u4e3a\u4e86\u9632\u6b62\u65e0\u9650\u7684\u5faa\u73af\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a ",r.a.createElement("code",null,"foo.js")," \u7684 ",r.a.createElement("code",null,"exports")," \u5bf9\u8c61\u7684\u672a\u5b8c\u6210\u7684\u526f\u672c\u7ed9 ",r.a.createElement("code",null,"bar.js")," \u6a21\u5757\u3002 \u7136\u540e ",r.a.createElement("code",null,"bar.js")," \u5b8c\u6210\u52a0\u8f7d\uff0c\u5e76\u5c06 ",r.a.createElement("code",null,"exports")," \u5bf9\u8c61\u63d0\u4f9b\u7ed9 ",r.a.createElement("code",null,"foo.js")," \u6a21\u5757\u3002"),r.a.createElement(c.a,{code:"# \u6267\u884c\u4e3b\u6587\u4ef6\n$ node main.js\n\nmain start\nfoo start\nbar start\n\u5728 bar \u4e2d\uff0ca.done = false\nbar \u7ed3\u675f\n\u5728 foo \u4e2d\uff0cb.done = true\nfoo \u7ed3\u675f\n\u5728 main \u4e2d\uff0ca.done=true\uff0cb.done=true\n",lang:"bash"}),r.a.createElement("h3",{id:"requiremain"},r.a.createElement("a",{"aria-hidden":"true",href:"#requiremain"},r.a.createElement("span",{className:"icon icon-link"})),"require.main"),r.a.createElement("p",null,r.a.createElement("code",null,"require")," \u65b9\u6cd5\u6709\u4e00\u4e2a ",r.a.createElement("code",null,"main")," \u5c5e\u6027\uff0c\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u6a21\u5757\u662f\u76f4\u63a5\u6267\u884c\uff0c\u8fd8\u662f\u88ab\u8c03\u7528\u6267\u884c\u3002"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u76f4\u63a5\u6267\u884c\u7684\u65f6\u5019\uff08",r.a.createElement("code",null,"node module.js"),"\uff09\uff0c",r.a.createElement("code",null,"require.main")," \u5c5e\u6027\u6307\u5411\u6a21\u5757\u672c\u8eab\u3002")),r.a.createElement(c.a,{code:"require.main === module;\n// true\n",lang:"js"}),r.a.createElement("ul",null,r.a.createElement("li",null,"\u8c03\u7528\u6267\u884c\u7684\u65f6\u5019\uff08\u901a\u8fc7 ",r.a.createElement("code",null,"require")," \u52a0\u8f7d\u8be5\u811a\u672c\u6267\u884c\uff09\uff0c\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u8fd4\u56de ",r.a.createElement("code",null,"false"),"\u3002")),r.a.createElement("h3",{id:"requireresolve"},r.a.createElement("a",{"aria-hidden":"true",href:"#requireresolve"},r.a.createElement("span",{className:"icon icon-link"})),"require.resolve"),r.a.createElement("p",null,r.a.createElement("code",null,"require.resolve")," \u7528\u4e8e\u83b7\u53d6\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u8be5\u65b9\u6cd5\u7684\u6267\u884c\u5e76\u4e0d\u4f1a\u771f\u6b63\u5730\u52a0\u8f7d\u8be5\u6a21\u5757\u3002"),r.a.createElement(c.a,{code:"// \u5df2\u5b89\u88c5 React \u81f3 node_modules\nconst react = require.resolve('react');\n\nconsole.log(react);\n// /Users/mrsingsing/Desktop/demo/node_modules/react/index.js\n",lang:"js"}),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("strong",null,"\u53c2\u8003\u8d44\u6599\uff1a")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"http://wiki.commonjs.org/wiki/CommonJS",target:"_blank",rel:"noopener noreferrer"},"\ud83d\udcd6 Wiki\uff1aCommonJS",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),r.a.createElement("li",null,r.a.createElement("a",{href:"https://juejin.im/post/6844903809957756936",target:"_blank",rel:"noopener noreferrer"},"\ud83d\udcdd Node.js \u4e2d\u7684 require \u51fd\u6570",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))))))}},"K+nK":function(e,n){function l(e){return e&&e.__esModule?e:{default:e}}e.exports=l},th7T:function(e,n,l){e.exports=l.p+"static/module-load-workflow.9dcc786c.png"}}]);